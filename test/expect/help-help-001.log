run 001 - base
==============

> [BACKREST-BIN] version
------------------------------------------------------------------------------------------------------------------------------------
[BACKREST-NAME-VERSION]

> [BACKREST-BIN] help
------------------------------------------------------------------------------------------------------------------------------------
[BACKREST-NAME-VERSION] - General help

Usage:
    pgbackrest [options] [command]

Commands:
    archive-get     Get a WAL segment from the archive.
    archive-push    Push a WAL segment to the archive.
    backup          Backup a database cluster.
    check           Check the configuration.
    expire          Expire backups that exceed retention.
    help            Get help.
    info            Retrieve information about backups.
    restore         Restore a database cluster.
    stanza-create   Create the required stanza data.
    stanza-delete   Delete a stanza.
    stanza-upgrade  Upgrade a stanza.
    start           Allow pgBackRest processes to run.
    stop            Stop pgBackRest processes from running.
    version         Get version.

Use 'pgbackrest help [command]' for more information.

> [BACKREST-BIN] help version
------------------------------------------------------------------------------------------------------------------------------------
[BACKREST-NAME-VERSION] - 'version' command help

Get version.

Displays installed pgBackRest version.

> [BACKREST-BIN] help --output=json --stanza=main --backup-host=backup info
------------------------------------------------------------------------------------------------------------------------------------
[BACKREST-NAME-VERSION] - 'info' command help

Retrieve information about backups.

The info command operates on a single stanza or all stanzas. Text output is the
default and gives a human-readable summary of backups for the stanza(s)
requested. This format is subject to change with any release.

For machine-readable output use --output=json. The JSON output contains far
more information than the text output, however this feature is currently
experimental so the format may change between versions.

Command Options:

  --output                  output format [current=json, default=text]

General Options:

  --buffer-size             buffer size for file operations [default=4194304]
  --cmd-ssh                 path to ssh client executable [default=ssh]
  --compress-level          compression level for stored files [default=6]
  --compress-level-network  compression level for network transfer when
compress=n [default=3]
  --config                  pgBackRest configuration file
[default=/etc/pgbackrest.conf]
  --lock-path               path where lock files are stored
[default=/tmp/pgbackrest]
  --protocol-timeout        protocol timeout [default=1830]
  --stanza                  defines the stanza [current=main]

Log Options:

  --log-level-console       level for console logging [default=warn]
  --log-level-file          level for file logging [default=info]
  --log-level-stderr        level for stderr logging [default=warn]
  --log-path                path where log files are stored
[default=/var/log/pgbackrest]
  --log-timestamp           enable timestamp in logging [default=y]

Repository Options:

  --backup-cmd              pgBackRest exe path on the backup host
[default=[BACKREST-BIN]]
  --backup-config           pgBackRest backup host configuration file
[default=/etc/pgbackrest.conf]
  --backup-host             backup host when operating remotely via SSH
[current=backup]
  --backup-ssh-port         backup server SSH port when backup-host is set
  --backup-user             backup host user when backup-host is set
[default=backrest]
  --repo-cipher-pass        repository cipher passphrase
  --repo-cipher-type        cipher used to encrypt the repository [default=none]
  --repo-path               repository path where WAL segments and backups
stored [default=/var/lib/pgbackrest]
  --repo-s3-bucket          s3 repository bucket
  --repo-s3-ca-file         s3 SSL CA File
  --repo-s3-ca-path         s3 SSL CA Path
  --repo-s3-endpoint        s3 repository endpoint
  --repo-s3-host            s3 repository host
  --repo-s3-key             s3 repository access key
  --repo-s3-key-secret      s3 repository secret access key
  --repo-s3-region          s3 repository region
  --repo-s3-verify-ssl      verify S3 server certificate [default=y]
  --repo-type               type of storage used for the repository
[default=posix]

Use 'pgbackrest help info [option]' for more information.

> [BACKREST-BIN] help --output=json --stanza=main info output
------------------------------------------------------------------------------------------------------------------------------------
[BACKREST-NAME-VERSION] - 'info' command - 'output' option help

Output format.

The following output types are supported:

* text - Human-readable summary of backup information.
* json - Exhaustive machine-readable backup information in JSON format.

current: json
default: text

> [BACKREST-BIN] help check
------------------------------------------------------------------------------------------------------------------------------------
[BACKREST-NAME-VERSION] - 'check' command help

Check the configuration.

The check command validates that pgBackRest and the archive_command setting are
configured correctly for archiving and backups. It detects misconfigurations,
particularly in archiving, that result in incomplete backups because required
WAL segments did not reach the archive. The command can be run on the database
or the backup host. The command may also be run on the standby host, however,
since pg_switch_xlog()/pg_switch_wal() cannot be performed on the standby, the
command will only test the repository configuration.

Note that pg_create_restore_point('pgBackRest Archive Check') and
pg_switch_xlog()/pg_switch_wal() are called to force PostgreSQL to archive a
WAL segment. Restore points are only supported in PostgreSQL >= 9.1 so for
older versions the check command may fail if there has been no write activity
since the last log rotation, therefore it is recommended that activity be
generated by the user if there have been no writes since the last WAL switch
before running the check command.

Command Options:

  --archive-check           check that WAL segments are present in the archive
before backup completes [default=y]
  --archive-timeout         archive timeout [default=60]
  --backup-standby          backup from the standby cluster [default=n]
  --online                  check an online cluster [default=y]

General Options:

  --buffer-size             buffer size for file operations [default=4194304]
  --cmd-ssh                 path to ssh client executable [default=ssh]
  --compress-level          compression level for stored files [default=6]
  --compress-level-network  compression level for network transfer when
compress=n [default=3]
  --config                  pgBackRest configuration file
[default=/etc/pgbackrest.conf]
  --db-timeout              database query timeout [default=1800]
  --neutral-umask           use a neutral umask [default=y]
  --protocol-timeout        protocol timeout [default=1830]
  --stanza                  defines the stanza

Log Options:

  --log-level-console       level for console logging [default=warn]
  --log-level-file          level for file logging [default=info]
  --log-level-stderr        level for stderr logging [default=warn]
  --log-path                path where log files are stored
[default=/var/log/pgbackrest]
  --log-timestamp           enable timestamp in logging [default=y]

Repository Options:

  --backup-cmd              pgBackRest exe path on the backup host
  --backup-config           pgBackRest backup host configuration file
[default=/etc/pgbackrest.conf]
  --backup-host             backup host when operating remotely via SSH
  --backup-ssh-port         backup server SSH port when backup-host is set
  --backup-user             backup host user when backup-host is set
[default=backrest]
  --repo-cipher-pass        repository cipher passphrase
  --repo-cipher-type        cipher used to encrypt the repository [default=none]
  --repo-path               repository path where WAL segments and backups
stored [default=/var/lib/pgbackrest]
  --repo-s3-bucket          s3 repository bucket
  --repo-s3-ca-file         s3 SSL CA File
  --repo-s3-ca-path         s3 SSL CA Path
  --repo-s3-endpoint        s3 repository endpoint
  --repo-s3-host            s3 repository host
  --repo-s3-key             s3 repository access key
  --repo-s3-key-secret      s3 repository secret access key
  --repo-s3-region          s3 repository region
  --repo-s3-verify-ssl      verify S3 server certificate [default=y]
  --repo-type               type of storage used for the repository
[default=posix]

Stanza Options:

  --db-cmd                  pgBackRest exe path on the database host
  --db-config               pgBackRest database host configuration file
[default=/etc/pgbackrest.conf]
  --db-host                 cluster host for operating remotely via SSH
  --db-path                 cluster data directory
  --db-port                 cluster port [default=5432]
  --db-socket-path          cluster unix socket path
  --db-ssh-port             database server SSH port when db-host is set
  --db-user                 cluster host logon user when db-host is set
[default=postgres]

Use 'pgbackrest help check [option]' for more information.
