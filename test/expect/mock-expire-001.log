run 001 - simple, enc 0, storage posix
======================================

* full backup: label = [BACKUP-FULL-1], start = 000000010000000000000000, stop = 000000010000000000000002
* incr backup: label = [BACKUP-INCR-1], prior = [BACKUP-FULL-1], start = 000000010000000000000006, stop = 0000000100000000000000FB
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"0000000100000000000000FB","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-1]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-1]
[BACKUP-INCR-1]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000
00000001000000000000000A-0000000000000000000000000000000000000000.gz
00000001000000000000000B-0000000000000000000000000000000000000000
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000
000000010000000000000010-0000000000000000000000000000000000000000.gz
000000010000000000000011-0000000000000000000000000000000000000000
000000010000000000000012-0000000000000000000000000000000000000000.gz
000000010000000000000013-0000000000000000000000000000000000000000
000000010000000000000014-0000000000000000000000000000000000000000.gz
000000010000000000000015-0000000000000000000000000000000000000000
000000010000000000000016-0000000000000000000000000000000000000000.gz
000000010000000000000017-0000000000000000000000000000000000000000
000000010000000000000018-0000000000000000000000000000000000000000.gz
000000010000000000000019-0000000000000000000000000000000000000000
00000001000000000000001A-0000000000000000000000000000000000000000.gz
00000001000000000000001B-0000000000000000000000000000000000000000
00000001000000000000001C-0000000000000000000000000000000000000000.gz
00000001000000000000001D-0000000000000000000000000000000000000000
00000001000000000000001E-0000000000000000000000000000000000000000.gz
00000001000000000000001F-0000000000000000000000000000000000000000
000000010000000000000020-0000000000000000000000000000000000000000.gz
000000010000000000000021-0000000000000000000000000000000000000000
000000010000000000000022-0000000000000000000000000000000000000000.gz
000000010000000000000023-0000000000000000000000000000000000000000
000000010000000000000024-0000000000000000000000000000000000000000.gz
000000010000000000000025-0000000000000000000000000000000000000000
000000010000000000000026-0000000000000000000000000000000000000000.gz
000000010000000000000027-0000000000000000000000000000000000000000
000000010000000000000028-0000000000000000000000000000000000000000.gz
000000010000000000000029-0000000000000000000000000000000000000000
00000001000000000000002A-0000000000000000000000000000000000000000.gz
00000001000000000000002B-0000000000000000000000000000000000000000
00000001000000000000002C-0000000000000000000000000000000000000000.gz
00000001000000000000002D-0000000000000000000000000000000000000000
00000001000000000000002E-0000000000000000000000000000000000000000.gz
00000001000000000000002F-0000000000000000000000000000000000000000
000000010000000000000030-0000000000000000000000000000000000000000.gz
000000010000000000000031-0000000000000000000000000000000000000000
000000010000000000000032-0000000000000000000000000000000000000000.gz
000000010000000000000033-0000000000000000000000000000000000000000
000000010000000000000034-0000000000000000000000000000000000000000.gz
000000010000000000000035-0000000000000000000000000000000000000000
000000010000000000000036-0000000000000000000000000000000000000000.gz
000000010000000000000037-0000000000000000000000000000000000000000
000000010000000000000038-0000000000000000000000000000000000000000.gz
000000010000000000000039-0000000000000000000000000000000000000000
00000001000000000000003A-0000000000000000000000000000000000000000.gz
00000001000000000000003B-0000000000000000000000000000000000000000
00000001000000000000003C-0000000000000000000000000000000000000000.gz
00000001000000000000003D-0000000000000000000000000000000000000000
00000001000000000000003E-0000000000000000000000000000000000000000.gz
00000001000000000000003F-0000000000000000000000000000000000000000
000000010000000000000040-0000000000000000000000000000000000000000.gz
000000010000000000000041-0000000000000000000000000000000000000000
000000010000000000000042-0000000000000000000000000000000000000000.gz
000000010000000000000043-0000000000000000000000000000000000000000
000000010000000000000044-0000000000000000000000000000000000000000.gz
000000010000000000000045-0000000000000000000000000000000000000000
000000010000000000000046-0000000000000000000000000000000000000000.gz
000000010000000000000047-0000000000000000000000000000000000000000
000000010000000000000048-0000000000000000000000000000000000000000.gz
000000010000000000000049-0000000000000000000000000000000000000000
00000001000000000000004A-0000000000000000000000000000000000000000.gz
00000001000000000000004B-0000000000000000000000000000000000000000
00000001000000000000004C-0000000000000000000000000000000000000000.gz
00000001000000000000004D-0000000000000000000000000000000000000000
00000001000000000000004E-0000000000000000000000000000000000000000.gz
00000001000000000000004F-0000000000000000000000000000000000000000
000000010000000000000050-0000000000000000000000000000000000000000.gz
000000010000000000000051-0000000000000000000000000000000000000000
000000010000000000000052-0000000000000000000000000000000000000000.gz
000000010000000000000053-0000000000000000000000000000000000000000
000000010000000000000054-0000000000000000000000000000000000000000.gz
000000010000000000000055-0000000000000000000000000000000000000000
000000010000000000000056-0000000000000000000000000000000000000000.gz
000000010000000000000057-0000000000000000000000000000000000000000
000000010000000000000058-0000000000000000000000000000000000000000.gz
000000010000000000000059-0000000000000000000000000000000000000000
00000001000000000000005A-0000000000000000000000000000000000000000.gz
00000001000000000000005B-0000000000000000000000000000000000000000
00000001000000000000005C-0000000000000000000000000000000000000000.gz
00000001000000000000005D-0000000000000000000000000000000000000000
00000001000000000000005E-0000000000000000000000000000000000000000.gz
00000001000000000000005F-0000000000000000000000000000000000000000
000000010000000000000060-0000000000000000000000000000000000000000.gz
000000010000000000000061-0000000000000000000000000000000000000000
000000010000000000000062-0000000000000000000000000000000000000000.gz
000000010000000000000063-0000000000000000000000000000000000000000
000000010000000000000064-0000000000000000000000000000000000000000.gz
000000010000000000000065-0000000000000000000000000000000000000000
000000010000000000000066-0000000000000000000000000000000000000000.gz
000000010000000000000067-0000000000000000000000000000000000000000
000000010000000000000068-0000000000000000000000000000000000000000.gz
000000010000000000000069-0000000000000000000000000000000000000000
00000001000000000000006A-0000000000000000000000000000000000000000.gz
00000001000000000000006B-0000000000000000000000000000000000000000
00000001000000000000006C-0000000000000000000000000000000000000000.gz
00000001000000000000006D-0000000000000000000000000000000000000000
00000001000000000000006E-0000000000000000000000000000000000000000.gz
00000001000000000000006F-0000000000000000000000000000000000000000
000000010000000000000070-0000000000000000000000000000000000000000.gz
000000010000000000000071-0000000000000000000000000000000000000000
000000010000000000000072-0000000000000000000000000000000000000000.gz
000000010000000000000073-0000000000000000000000000000000000000000
000000010000000000000074-0000000000000000000000000000000000000000.gz
000000010000000000000075-0000000000000000000000000000000000000000
000000010000000000000076-0000000000000000000000000000000000000000.gz
000000010000000000000077-0000000000000000000000000000000000000000
000000010000000000000078-0000000000000000000000000000000000000000.gz
000000010000000000000079-0000000000000000000000000000000000000000
00000001000000000000007A-0000000000000000000000000000000000000000.gz
00000001000000000000007B-0000000000000000000000000000000000000000
00000001000000000000007C-0000000000000000000000000000000000000000.gz
00000001000000000000007D-0000000000000000000000000000000000000000
00000001000000000000007E-0000000000000000000000000000000000000000.gz
00000001000000000000007F-0000000000000000000000000000000000000000
000000010000000000000080-0000000000000000000000000000000000000000.gz
000000010000000000000081-0000000000000000000000000000000000000000
000000010000000000000082-0000000000000000000000000000000000000000.gz
000000010000000000000083-0000000000000000000000000000000000000000
000000010000000000000084-0000000000000000000000000000000000000000.gz
000000010000000000000085-0000000000000000000000000000000000000000
000000010000000000000086-0000000000000000000000000000000000000000.gz
000000010000000000000087-0000000000000000000000000000000000000000
000000010000000000000088-0000000000000000000000000000000000000000.gz
000000010000000000000089-0000000000000000000000000000000000000000
00000001000000000000008A-0000000000000000000000000000000000000000.gz
00000001000000000000008B-0000000000000000000000000000000000000000
00000001000000000000008C-0000000000000000000000000000000000000000.gz
00000001000000000000008D-0000000000000000000000000000000000000000
00000001000000000000008E-0000000000000000000000000000000000000000.gz
00000001000000000000008F-0000000000000000000000000000000000000000
000000010000000000000090-0000000000000000000000000000000000000000.gz
000000010000000000000091-0000000000000000000000000000000000000000
000000010000000000000092-0000000000000000000000000000000000000000.gz
000000010000000000000093-0000000000000000000000000000000000000000
000000010000000000000094-0000000000000000000000000000000000000000.gz
000000010000000000000095-0000000000000000000000000000000000000000
000000010000000000000096-0000000000000000000000000000000000000000.gz
000000010000000000000097-0000000000000000000000000000000000000000
000000010000000000000098-0000000000000000000000000000000000000000.gz
000000010000000000000099-0000000000000000000000000000000000000000
00000001000000000000009A-0000000000000000000000000000000000000000.gz
00000001000000000000009B-0000000000000000000000000000000000000000
00000001000000000000009C-0000000000000000000000000000000000000000.gz
00000001000000000000009D-0000000000000000000000000000000000000000
00000001000000000000009E-0000000000000000000000000000000000000000.gz
00000001000000000000009F-0000000000000000000000000000000000000000
0000000100000000000000A0-0000000000000000000000000000000000000000.gz
0000000100000000000000A1-0000000000000000000000000000000000000000
0000000100000000000000A2-0000000000000000000000000000000000000000.gz
0000000100000000000000A3-0000000000000000000000000000000000000000
0000000100000000000000A4-0000000000000000000000000000000000000000.gz
0000000100000000000000A5-0000000000000000000000000000000000000000
0000000100000000000000A6-0000000000000000000000000000000000000000.gz
0000000100000000000000A7-0000000000000000000000000000000000000000
0000000100000000000000A8-0000000000000000000000000000000000000000.gz
0000000100000000000000A9-0000000000000000000000000000000000000000
0000000100000000000000AA-0000000000000000000000000000000000000000.gz
0000000100000000000000AB-0000000000000000000000000000000000000000
0000000100000000000000AC-0000000000000000000000000000000000000000.gz
0000000100000000000000AD-0000000000000000000000000000000000000000
0000000100000000000000AE-0000000000000000000000000000000000000000.gz
0000000100000000000000AF-0000000000000000000000000000000000000000
0000000100000000000000B0-0000000000000000000000000000000000000000.gz
0000000100000000000000B1-0000000000000000000000000000000000000000
0000000100000000000000B2-0000000000000000000000000000000000000000.gz
0000000100000000000000B3-0000000000000000000000000000000000000000
0000000100000000000000B4-0000000000000000000000000000000000000000.gz
0000000100000000000000B5-0000000000000000000000000000000000000000
0000000100000000000000B6-0000000000000000000000000000000000000000.gz
0000000100000000000000B7-0000000000000000000000000000000000000000
0000000100000000000000B8-0000000000000000000000000000000000000000.gz
0000000100000000000000B9-0000000000000000000000000000000000000000
0000000100000000000000BA-0000000000000000000000000000000000000000.gz
0000000100000000000000BB-0000000000000000000000000000000000000000
0000000100000000000000BC-0000000000000000000000000000000000000000.gz
0000000100000000000000BD-0000000000000000000000000000000000000000
0000000100000000000000BE-0000000000000000000000000000000000000000.gz
0000000100000000000000BF-0000000000000000000000000000000000000000
0000000100000000000000C0-0000000000000000000000000000000000000000.gz
0000000100000000000000C1-0000000000000000000000000000000000000000
0000000100000000000000C2-0000000000000000000000000000000000000000.gz
0000000100000000000000C3-0000000000000000000000000000000000000000
0000000100000000000000C4-0000000000000000000000000000000000000000.gz
0000000100000000000000C5-0000000000000000000000000000000000000000
0000000100000000000000C6-0000000000000000000000000000000000000000.gz
0000000100000000000000C7-0000000000000000000000000000000000000000
0000000100000000000000C8-0000000000000000000000000000000000000000.gz
0000000100000000000000C9-0000000000000000000000000000000000000000
0000000100000000000000CA-0000000000000000000000000000000000000000.gz
0000000100000000000000CB-0000000000000000000000000000000000000000
0000000100000000000000CC-0000000000000000000000000000000000000000.gz
0000000100000000000000CD-0000000000000000000000000000000000000000
0000000100000000000000CE-0000000000000000000000000000000000000000.gz
0000000100000000000000CF-0000000000000000000000000000000000000000
0000000100000000000000D0-0000000000000000000000000000000000000000.gz
0000000100000000000000D1-0000000000000000000000000000000000000000
0000000100000000000000D2-0000000000000000000000000000000000000000.gz
0000000100000000000000D3-0000000000000000000000000000000000000000
0000000100000000000000D4-0000000000000000000000000000000000000000.gz
0000000100000000000000D5-0000000000000000000000000000000000000000
0000000100000000000000D6-0000000000000000000000000000000000000000.gz
0000000100000000000000D7-0000000000000000000000000000000000000000
0000000100000000000000D8-0000000000000000000000000000000000000000.gz
0000000100000000000000D9-0000000000000000000000000000000000000000
0000000100000000000000DA-0000000000000000000000000000000000000000.gz
0000000100000000000000DB-0000000000000000000000000000000000000000
0000000100000000000000DC-0000000000000000000000000000000000000000.gz
0000000100000000000000DD-0000000000000000000000000000000000000000
0000000100000000000000DE-0000000000000000000000000000000000000000.gz
0000000100000000000000DF-0000000000000000000000000000000000000000
0000000100000000000000E0-0000000000000000000000000000000000000000.gz
0000000100000000000000E1-0000000000000000000000000000000000000000
0000000100000000000000E2-0000000000000000000000000000000000000000.gz
0000000100000000000000E3-0000000000000000000000000000000000000000
0000000100000000000000E4-0000000000000000000000000000000000000000.gz
0000000100000000000000E5-0000000000000000000000000000000000000000
0000000100000000000000E6-0000000000000000000000000000000000000000.gz
0000000100000000000000E7-0000000000000000000000000000000000000000
0000000100000000000000E8-0000000000000000000000000000000000000000.gz
0000000100000000000000E9-0000000000000000000000000000000000000000
0000000100000000000000EA-0000000000000000000000000000000000000000.gz
0000000100000000000000EB-0000000000000000000000000000000000000000
0000000100000000000000EC-0000000000000000000000000000000000000000.gz
0000000100000000000000ED-0000000000000000000000000000000000000000
0000000100000000000000EE-0000000000000000000000000000000000000000.gz
0000000100000000000000EF-0000000000000000000000000000000000000000
0000000100000000000000F0-0000000000000000000000000000000000000000.gz
0000000100000000000000F1-0000000000000000000000000000000000000000
0000000100000000000000F2-0000000000000000000000000000000000000000.gz
0000000100000000000000F3-0000000000000000000000000000000000000000
0000000100000000000000F4-0000000000000000000000000000000000000000.gz
0000000100000000000000F5-0000000000000000000000000000000000000000
0000000100000000000000F6-0000000000000000000000000000000000000000.gz
0000000100000000000000F7-0000000000000000000000000000000000000000
0000000100000000000000F8-0000000000000000000000000000000000000000.gz
0000000100000000000000F9-0000000000000000000000000000000000000000
0000000100000000000000FA-0000000000000000000000000000000000000000.gz
0000000100000000000000FB-0000000000000000000000000000000000000000
0000000100000000000000FC-0000000000000000000000000000000000000000.gz
0000000100000000000000FD-0000000000000000000000000000000000000000
0000000100000000000000FE-0000000000000000000000000000000000000000.gz

Nothing to expire
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=full --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=full --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-1], start = 000000010000000000000000
P00   INFO: repo1: 9.2-1 no archive to remove
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"0000000100000000000000FB","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-1]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-1]
[BACKUP-INCR-1]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000
00000001000000000000000A-0000000000000000000000000000000000000000.gz
00000001000000000000000B-0000000000000000000000000000000000000000
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000
000000010000000000000010-0000000000000000000000000000000000000000.gz
000000010000000000000011-0000000000000000000000000000000000000000
000000010000000000000012-0000000000000000000000000000000000000000.gz
000000010000000000000013-0000000000000000000000000000000000000000
000000010000000000000014-0000000000000000000000000000000000000000.gz
000000010000000000000015-0000000000000000000000000000000000000000
000000010000000000000016-0000000000000000000000000000000000000000.gz
000000010000000000000017-0000000000000000000000000000000000000000
000000010000000000000018-0000000000000000000000000000000000000000.gz
000000010000000000000019-0000000000000000000000000000000000000000
00000001000000000000001A-0000000000000000000000000000000000000000.gz
00000001000000000000001B-0000000000000000000000000000000000000000
00000001000000000000001C-0000000000000000000000000000000000000000.gz
00000001000000000000001D-0000000000000000000000000000000000000000
00000001000000000000001E-0000000000000000000000000000000000000000.gz
00000001000000000000001F-0000000000000000000000000000000000000000
000000010000000000000020-0000000000000000000000000000000000000000.gz
000000010000000000000021-0000000000000000000000000000000000000000
000000010000000000000022-0000000000000000000000000000000000000000.gz
000000010000000000000023-0000000000000000000000000000000000000000
000000010000000000000024-0000000000000000000000000000000000000000.gz
000000010000000000000025-0000000000000000000000000000000000000000
000000010000000000000026-0000000000000000000000000000000000000000.gz
000000010000000000000027-0000000000000000000000000000000000000000
000000010000000000000028-0000000000000000000000000000000000000000.gz
000000010000000000000029-0000000000000000000000000000000000000000
00000001000000000000002A-0000000000000000000000000000000000000000.gz
00000001000000000000002B-0000000000000000000000000000000000000000
00000001000000000000002C-0000000000000000000000000000000000000000.gz
00000001000000000000002D-0000000000000000000000000000000000000000
00000001000000000000002E-0000000000000000000000000000000000000000.gz
00000001000000000000002F-0000000000000000000000000000000000000000
000000010000000000000030-0000000000000000000000000000000000000000.gz
000000010000000000000031-0000000000000000000000000000000000000000
000000010000000000000032-0000000000000000000000000000000000000000.gz
000000010000000000000033-0000000000000000000000000000000000000000
000000010000000000000034-0000000000000000000000000000000000000000.gz
000000010000000000000035-0000000000000000000000000000000000000000
000000010000000000000036-0000000000000000000000000000000000000000.gz
000000010000000000000037-0000000000000000000000000000000000000000
000000010000000000000038-0000000000000000000000000000000000000000.gz
000000010000000000000039-0000000000000000000000000000000000000000
00000001000000000000003A-0000000000000000000000000000000000000000.gz
00000001000000000000003B-0000000000000000000000000000000000000000
00000001000000000000003C-0000000000000000000000000000000000000000.gz
00000001000000000000003D-0000000000000000000000000000000000000000
00000001000000000000003E-0000000000000000000000000000000000000000.gz
00000001000000000000003F-0000000000000000000000000000000000000000
000000010000000000000040-0000000000000000000000000000000000000000.gz
000000010000000000000041-0000000000000000000000000000000000000000
000000010000000000000042-0000000000000000000000000000000000000000.gz
000000010000000000000043-0000000000000000000000000000000000000000
000000010000000000000044-0000000000000000000000000000000000000000.gz
000000010000000000000045-0000000000000000000000000000000000000000
000000010000000000000046-0000000000000000000000000000000000000000.gz
000000010000000000000047-0000000000000000000000000000000000000000
000000010000000000000048-0000000000000000000000000000000000000000.gz
000000010000000000000049-0000000000000000000000000000000000000000
00000001000000000000004A-0000000000000000000000000000000000000000.gz
00000001000000000000004B-0000000000000000000000000000000000000000
00000001000000000000004C-0000000000000000000000000000000000000000.gz
00000001000000000000004D-0000000000000000000000000000000000000000
00000001000000000000004E-0000000000000000000000000000000000000000.gz
00000001000000000000004F-0000000000000000000000000000000000000000
000000010000000000000050-0000000000000000000000000000000000000000.gz
000000010000000000000051-0000000000000000000000000000000000000000
000000010000000000000052-0000000000000000000000000000000000000000.gz
000000010000000000000053-0000000000000000000000000000000000000000
000000010000000000000054-0000000000000000000000000000000000000000.gz
000000010000000000000055-0000000000000000000000000000000000000000
000000010000000000000056-0000000000000000000000000000000000000000.gz
000000010000000000000057-0000000000000000000000000000000000000000
000000010000000000000058-0000000000000000000000000000000000000000.gz
000000010000000000000059-0000000000000000000000000000000000000000
00000001000000000000005A-0000000000000000000000000000000000000000.gz
00000001000000000000005B-0000000000000000000000000000000000000000
00000001000000000000005C-0000000000000000000000000000000000000000.gz
00000001000000000000005D-0000000000000000000000000000000000000000
00000001000000000000005E-0000000000000000000000000000000000000000.gz
00000001000000000000005F-0000000000000000000000000000000000000000
000000010000000000000060-0000000000000000000000000000000000000000.gz
000000010000000000000061-0000000000000000000000000000000000000000
000000010000000000000062-0000000000000000000000000000000000000000.gz
000000010000000000000063-0000000000000000000000000000000000000000
000000010000000000000064-0000000000000000000000000000000000000000.gz
000000010000000000000065-0000000000000000000000000000000000000000
000000010000000000000066-0000000000000000000000000000000000000000.gz
000000010000000000000067-0000000000000000000000000000000000000000
000000010000000000000068-0000000000000000000000000000000000000000.gz
000000010000000000000069-0000000000000000000000000000000000000000
00000001000000000000006A-0000000000000000000000000000000000000000.gz
00000001000000000000006B-0000000000000000000000000000000000000000
00000001000000000000006C-0000000000000000000000000000000000000000.gz
00000001000000000000006D-0000000000000000000000000000000000000000
00000001000000000000006E-0000000000000000000000000000000000000000.gz
00000001000000000000006F-0000000000000000000000000000000000000000
000000010000000000000070-0000000000000000000000000000000000000000.gz
000000010000000000000071-0000000000000000000000000000000000000000
000000010000000000000072-0000000000000000000000000000000000000000.gz
000000010000000000000073-0000000000000000000000000000000000000000
000000010000000000000074-0000000000000000000000000000000000000000.gz
000000010000000000000075-0000000000000000000000000000000000000000
000000010000000000000076-0000000000000000000000000000000000000000.gz
000000010000000000000077-0000000000000000000000000000000000000000
000000010000000000000078-0000000000000000000000000000000000000000.gz
000000010000000000000079-0000000000000000000000000000000000000000
00000001000000000000007A-0000000000000000000000000000000000000000.gz
00000001000000000000007B-0000000000000000000000000000000000000000
00000001000000000000007C-0000000000000000000000000000000000000000.gz
00000001000000000000007D-0000000000000000000000000000000000000000
00000001000000000000007E-0000000000000000000000000000000000000000.gz
00000001000000000000007F-0000000000000000000000000000000000000000
000000010000000000000080-0000000000000000000000000000000000000000.gz
000000010000000000000081-0000000000000000000000000000000000000000
000000010000000000000082-0000000000000000000000000000000000000000.gz
000000010000000000000083-0000000000000000000000000000000000000000
000000010000000000000084-0000000000000000000000000000000000000000.gz
000000010000000000000085-0000000000000000000000000000000000000000
000000010000000000000086-0000000000000000000000000000000000000000.gz
000000010000000000000087-0000000000000000000000000000000000000000
000000010000000000000088-0000000000000000000000000000000000000000.gz
000000010000000000000089-0000000000000000000000000000000000000000
00000001000000000000008A-0000000000000000000000000000000000000000.gz
00000001000000000000008B-0000000000000000000000000000000000000000
00000001000000000000008C-0000000000000000000000000000000000000000.gz
00000001000000000000008D-0000000000000000000000000000000000000000
00000001000000000000008E-0000000000000000000000000000000000000000.gz
00000001000000000000008F-0000000000000000000000000000000000000000
000000010000000000000090-0000000000000000000000000000000000000000.gz
000000010000000000000091-0000000000000000000000000000000000000000
000000010000000000000092-0000000000000000000000000000000000000000.gz
000000010000000000000093-0000000000000000000000000000000000000000
000000010000000000000094-0000000000000000000000000000000000000000.gz
000000010000000000000095-0000000000000000000000000000000000000000
000000010000000000000096-0000000000000000000000000000000000000000.gz
000000010000000000000097-0000000000000000000000000000000000000000
000000010000000000000098-0000000000000000000000000000000000000000.gz
000000010000000000000099-0000000000000000000000000000000000000000
00000001000000000000009A-0000000000000000000000000000000000000000.gz
00000001000000000000009B-0000000000000000000000000000000000000000
00000001000000000000009C-0000000000000000000000000000000000000000.gz
00000001000000000000009D-0000000000000000000000000000000000000000
00000001000000000000009E-0000000000000000000000000000000000000000.gz
00000001000000000000009F-0000000000000000000000000000000000000000
0000000100000000000000A0-0000000000000000000000000000000000000000.gz
0000000100000000000000A1-0000000000000000000000000000000000000000
0000000100000000000000A2-0000000000000000000000000000000000000000.gz
0000000100000000000000A3-0000000000000000000000000000000000000000
0000000100000000000000A4-0000000000000000000000000000000000000000.gz
0000000100000000000000A5-0000000000000000000000000000000000000000
0000000100000000000000A6-0000000000000000000000000000000000000000.gz
0000000100000000000000A7-0000000000000000000000000000000000000000
0000000100000000000000A8-0000000000000000000000000000000000000000.gz
0000000100000000000000A9-0000000000000000000000000000000000000000
0000000100000000000000AA-0000000000000000000000000000000000000000.gz
0000000100000000000000AB-0000000000000000000000000000000000000000
0000000100000000000000AC-0000000000000000000000000000000000000000.gz
0000000100000000000000AD-0000000000000000000000000000000000000000
0000000100000000000000AE-0000000000000000000000000000000000000000.gz
0000000100000000000000AF-0000000000000000000000000000000000000000
0000000100000000000000B0-0000000000000000000000000000000000000000.gz
0000000100000000000000B1-0000000000000000000000000000000000000000
0000000100000000000000B2-0000000000000000000000000000000000000000.gz
0000000100000000000000B3-0000000000000000000000000000000000000000
0000000100000000000000B4-0000000000000000000000000000000000000000.gz
0000000100000000000000B5-0000000000000000000000000000000000000000
0000000100000000000000B6-0000000000000000000000000000000000000000.gz
0000000100000000000000B7-0000000000000000000000000000000000000000
0000000100000000000000B8-0000000000000000000000000000000000000000.gz
0000000100000000000000B9-0000000000000000000000000000000000000000
0000000100000000000000BA-0000000000000000000000000000000000000000.gz
0000000100000000000000BB-0000000000000000000000000000000000000000
0000000100000000000000BC-0000000000000000000000000000000000000000.gz
0000000100000000000000BD-0000000000000000000000000000000000000000
0000000100000000000000BE-0000000000000000000000000000000000000000.gz
0000000100000000000000BF-0000000000000000000000000000000000000000
0000000100000000000000C0-0000000000000000000000000000000000000000.gz
0000000100000000000000C1-0000000000000000000000000000000000000000
0000000100000000000000C2-0000000000000000000000000000000000000000.gz
0000000100000000000000C3-0000000000000000000000000000000000000000
0000000100000000000000C4-0000000000000000000000000000000000000000.gz
0000000100000000000000C5-0000000000000000000000000000000000000000
0000000100000000000000C6-0000000000000000000000000000000000000000.gz
0000000100000000000000C7-0000000000000000000000000000000000000000
0000000100000000000000C8-0000000000000000000000000000000000000000.gz
0000000100000000000000C9-0000000000000000000000000000000000000000
0000000100000000000000CA-0000000000000000000000000000000000000000.gz
0000000100000000000000CB-0000000000000000000000000000000000000000
0000000100000000000000CC-0000000000000000000000000000000000000000.gz
0000000100000000000000CD-0000000000000000000000000000000000000000
0000000100000000000000CE-0000000000000000000000000000000000000000.gz
0000000100000000000000CF-0000000000000000000000000000000000000000
0000000100000000000000D0-0000000000000000000000000000000000000000.gz
0000000100000000000000D1-0000000000000000000000000000000000000000
0000000100000000000000D2-0000000000000000000000000000000000000000.gz
0000000100000000000000D3-0000000000000000000000000000000000000000
0000000100000000000000D4-0000000000000000000000000000000000000000.gz
0000000100000000000000D5-0000000000000000000000000000000000000000
0000000100000000000000D6-0000000000000000000000000000000000000000.gz
0000000100000000000000D7-0000000000000000000000000000000000000000
0000000100000000000000D8-0000000000000000000000000000000000000000.gz
0000000100000000000000D9-0000000000000000000000000000000000000000
0000000100000000000000DA-0000000000000000000000000000000000000000.gz
0000000100000000000000DB-0000000000000000000000000000000000000000
0000000100000000000000DC-0000000000000000000000000000000000000000.gz
0000000100000000000000DD-0000000000000000000000000000000000000000
0000000100000000000000DE-0000000000000000000000000000000000000000.gz
0000000100000000000000DF-0000000000000000000000000000000000000000
0000000100000000000000E0-0000000000000000000000000000000000000000.gz
0000000100000000000000E1-0000000000000000000000000000000000000000
0000000100000000000000E2-0000000000000000000000000000000000000000.gz
0000000100000000000000E3-0000000000000000000000000000000000000000
0000000100000000000000E4-0000000000000000000000000000000000000000.gz
0000000100000000000000E5-0000000000000000000000000000000000000000
0000000100000000000000E6-0000000000000000000000000000000000000000.gz
0000000100000000000000E7-0000000000000000000000000000000000000000
0000000100000000000000E8-0000000000000000000000000000000000000000.gz
0000000100000000000000E9-0000000000000000000000000000000000000000
0000000100000000000000EA-0000000000000000000000000000000000000000.gz
0000000100000000000000EB-0000000000000000000000000000000000000000
0000000100000000000000EC-0000000000000000000000000000000000000000.gz
0000000100000000000000ED-0000000000000000000000000000000000000000
0000000100000000000000EE-0000000000000000000000000000000000000000.gz
0000000100000000000000EF-0000000000000000000000000000000000000000
0000000100000000000000F0-0000000000000000000000000000000000000000.gz
0000000100000000000000F1-0000000000000000000000000000000000000000
0000000100000000000000F2-0000000000000000000000000000000000000000.gz
0000000100000000000000F3-0000000000000000000000000000000000000000
0000000100000000000000F4-0000000000000000000000000000000000000000.gz
0000000100000000000000F5-0000000000000000000000000000000000000000
0000000100000000000000F6-0000000000000000000000000000000000000000.gz
0000000100000000000000F7-0000000000000000000000000000000000000000
0000000100000000000000F8-0000000000000000000000000000000000000000.gz
0000000100000000000000F9-0000000000000000000000000000000000000000
0000000100000000000000FA-0000000000000000000000000000000000000000.gz
0000000100000000000000FB-0000000000000000000000000000000000000000
0000000100000000000000FC-0000000000000000000000000000000000000000.gz
0000000100000000000000FD-0000000000000000000000000000000000000000
0000000100000000000000FE-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-2], start = 000000010000000100000000, stop = 000000010000000100000002
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000000","backup-archive-stop":"000000010000000000000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000000000006","backup-archive-stop":"0000000100000000000000FB","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-1]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000000","backup-archive-stop":"000000010000000100000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-1]
[BACKUP-INCR-1]
[BACKUP-FULL-2]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000000:
000000010000000000000000-0000000000000000000000000000000000000000.gz
000000010000000000000001-0000000000000000000000000000000000000000
000000010000000000000002-0000000000000000000000000000000000000000.gz
000000010000000000000003-0000000000000000000000000000000000000000.gz
000000010000000000000004-0000000000000000000000000000000000000000
000000010000000000000005-0000000000000000000000000000000000000000.gz
000000010000000000000006-0000000000000000000000000000000000000000.gz
000000010000000000000007-0000000000000000000000000000000000000000
000000010000000000000008-0000000000000000000000000000000000000000.gz
000000010000000000000009-0000000000000000000000000000000000000000
00000001000000000000000A-0000000000000000000000000000000000000000.gz
00000001000000000000000B-0000000000000000000000000000000000000000
00000001000000000000000C-0000000000000000000000000000000000000000.gz
00000001000000000000000D-0000000000000000000000000000000000000000
00000001000000000000000E-0000000000000000000000000000000000000000.gz
00000001000000000000000F-0000000000000000000000000000000000000000
000000010000000000000010-0000000000000000000000000000000000000000.gz
000000010000000000000011-0000000000000000000000000000000000000000
000000010000000000000012-0000000000000000000000000000000000000000.gz
000000010000000000000013-0000000000000000000000000000000000000000
000000010000000000000014-0000000000000000000000000000000000000000.gz
000000010000000000000015-0000000000000000000000000000000000000000
000000010000000000000016-0000000000000000000000000000000000000000.gz
000000010000000000000017-0000000000000000000000000000000000000000
000000010000000000000018-0000000000000000000000000000000000000000.gz
000000010000000000000019-0000000000000000000000000000000000000000
00000001000000000000001A-0000000000000000000000000000000000000000.gz
00000001000000000000001B-0000000000000000000000000000000000000000
00000001000000000000001C-0000000000000000000000000000000000000000.gz
00000001000000000000001D-0000000000000000000000000000000000000000
00000001000000000000001E-0000000000000000000000000000000000000000.gz
00000001000000000000001F-0000000000000000000000000000000000000000
000000010000000000000020-0000000000000000000000000000000000000000.gz
000000010000000000000021-0000000000000000000000000000000000000000
000000010000000000000022-0000000000000000000000000000000000000000.gz
000000010000000000000023-0000000000000000000000000000000000000000
000000010000000000000024-0000000000000000000000000000000000000000.gz
000000010000000000000025-0000000000000000000000000000000000000000
000000010000000000000026-0000000000000000000000000000000000000000.gz
000000010000000000000027-0000000000000000000000000000000000000000
000000010000000000000028-0000000000000000000000000000000000000000.gz
000000010000000000000029-0000000000000000000000000000000000000000
00000001000000000000002A-0000000000000000000000000000000000000000.gz
00000001000000000000002B-0000000000000000000000000000000000000000
00000001000000000000002C-0000000000000000000000000000000000000000.gz
00000001000000000000002D-0000000000000000000000000000000000000000
00000001000000000000002E-0000000000000000000000000000000000000000.gz
00000001000000000000002F-0000000000000000000000000000000000000000
000000010000000000000030-0000000000000000000000000000000000000000.gz
000000010000000000000031-0000000000000000000000000000000000000000
000000010000000000000032-0000000000000000000000000000000000000000.gz
000000010000000000000033-0000000000000000000000000000000000000000
000000010000000000000034-0000000000000000000000000000000000000000.gz
000000010000000000000035-0000000000000000000000000000000000000000
000000010000000000000036-0000000000000000000000000000000000000000.gz
000000010000000000000037-0000000000000000000000000000000000000000
000000010000000000000038-0000000000000000000000000000000000000000.gz
000000010000000000000039-0000000000000000000000000000000000000000
00000001000000000000003A-0000000000000000000000000000000000000000.gz
00000001000000000000003B-0000000000000000000000000000000000000000
00000001000000000000003C-0000000000000000000000000000000000000000.gz
00000001000000000000003D-0000000000000000000000000000000000000000
00000001000000000000003E-0000000000000000000000000000000000000000.gz
00000001000000000000003F-0000000000000000000000000000000000000000
000000010000000000000040-0000000000000000000000000000000000000000.gz
000000010000000000000041-0000000000000000000000000000000000000000
000000010000000000000042-0000000000000000000000000000000000000000.gz
000000010000000000000043-0000000000000000000000000000000000000000
000000010000000000000044-0000000000000000000000000000000000000000.gz
000000010000000000000045-0000000000000000000000000000000000000000
000000010000000000000046-0000000000000000000000000000000000000000.gz
000000010000000000000047-0000000000000000000000000000000000000000
000000010000000000000048-0000000000000000000000000000000000000000.gz
000000010000000000000049-0000000000000000000000000000000000000000
00000001000000000000004A-0000000000000000000000000000000000000000.gz
00000001000000000000004B-0000000000000000000000000000000000000000
00000001000000000000004C-0000000000000000000000000000000000000000.gz
00000001000000000000004D-0000000000000000000000000000000000000000
00000001000000000000004E-0000000000000000000000000000000000000000.gz
00000001000000000000004F-0000000000000000000000000000000000000000
000000010000000000000050-0000000000000000000000000000000000000000.gz
000000010000000000000051-0000000000000000000000000000000000000000
000000010000000000000052-0000000000000000000000000000000000000000.gz
000000010000000000000053-0000000000000000000000000000000000000000
000000010000000000000054-0000000000000000000000000000000000000000.gz
000000010000000000000055-0000000000000000000000000000000000000000
000000010000000000000056-0000000000000000000000000000000000000000.gz
000000010000000000000057-0000000000000000000000000000000000000000
000000010000000000000058-0000000000000000000000000000000000000000.gz
000000010000000000000059-0000000000000000000000000000000000000000
00000001000000000000005A-0000000000000000000000000000000000000000.gz
00000001000000000000005B-0000000000000000000000000000000000000000
00000001000000000000005C-0000000000000000000000000000000000000000.gz
00000001000000000000005D-0000000000000000000000000000000000000000
00000001000000000000005E-0000000000000000000000000000000000000000.gz
00000001000000000000005F-0000000000000000000000000000000000000000
000000010000000000000060-0000000000000000000000000000000000000000.gz
000000010000000000000061-0000000000000000000000000000000000000000
000000010000000000000062-0000000000000000000000000000000000000000.gz
000000010000000000000063-0000000000000000000000000000000000000000
000000010000000000000064-0000000000000000000000000000000000000000.gz
000000010000000000000065-0000000000000000000000000000000000000000
000000010000000000000066-0000000000000000000000000000000000000000.gz
000000010000000000000067-0000000000000000000000000000000000000000
000000010000000000000068-0000000000000000000000000000000000000000.gz
000000010000000000000069-0000000000000000000000000000000000000000
00000001000000000000006A-0000000000000000000000000000000000000000.gz
00000001000000000000006B-0000000000000000000000000000000000000000
00000001000000000000006C-0000000000000000000000000000000000000000.gz
00000001000000000000006D-0000000000000000000000000000000000000000
00000001000000000000006E-0000000000000000000000000000000000000000.gz
00000001000000000000006F-0000000000000000000000000000000000000000
000000010000000000000070-0000000000000000000000000000000000000000.gz
000000010000000000000071-0000000000000000000000000000000000000000
000000010000000000000072-0000000000000000000000000000000000000000.gz
000000010000000000000073-0000000000000000000000000000000000000000
000000010000000000000074-0000000000000000000000000000000000000000.gz
000000010000000000000075-0000000000000000000000000000000000000000
000000010000000000000076-0000000000000000000000000000000000000000.gz
000000010000000000000077-0000000000000000000000000000000000000000
000000010000000000000078-0000000000000000000000000000000000000000.gz
000000010000000000000079-0000000000000000000000000000000000000000
00000001000000000000007A-0000000000000000000000000000000000000000.gz
00000001000000000000007B-0000000000000000000000000000000000000000
00000001000000000000007C-0000000000000000000000000000000000000000.gz
00000001000000000000007D-0000000000000000000000000000000000000000
00000001000000000000007E-0000000000000000000000000000000000000000.gz
00000001000000000000007F-0000000000000000000000000000000000000000
000000010000000000000080-0000000000000000000000000000000000000000.gz
000000010000000000000081-0000000000000000000000000000000000000000
000000010000000000000082-0000000000000000000000000000000000000000.gz
000000010000000000000083-0000000000000000000000000000000000000000
000000010000000000000084-0000000000000000000000000000000000000000.gz
000000010000000000000085-0000000000000000000000000000000000000000
000000010000000000000086-0000000000000000000000000000000000000000.gz
000000010000000000000087-0000000000000000000000000000000000000000
000000010000000000000088-0000000000000000000000000000000000000000.gz
000000010000000000000089-0000000000000000000000000000000000000000
00000001000000000000008A-0000000000000000000000000000000000000000.gz
00000001000000000000008B-0000000000000000000000000000000000000000
00000001000000000000008C-0000000000000000000000000000000000000000.gz
00000001000000000000008D-0000000000000000000000000000000000000000
00000001000000000000008E-0000000000000000000000000000000000000000.gz
00000001000000000000008F-0000000000000000000000000000000000000000
000000010000000000000090-0000000000000000000000000000000000000000.gz
000000010000000000000091-0000000000000000000000000000000000000000
000000010000000000000092-0000000000000000000000000000000000000000.gz
000000010000000000000093-0000000000000000000000000000000000000000
000000010000000000000094-0000000000000000000000000000000000000000.gz
000000010000000000000095-0000000000000000000000000000000000000000
000000010000000000000096-0000000000000000000000000000000000000000.gz
000000010000000000000097-0000000000000000000000000000000000000000
000000010000000000000098-0000000000000000000000000000000000000000.gz
000000010000000000000099-0000000000000000000000000000000000000000
00000001000000000000009A-0000000000000000000000000000000000000000.gz
00000001000000000000009B-0000000000000000000000000000000000000000
00000001000000000000009C-0000000000000000000000000000000000000000.gz
00000001000000000000009D-0000000000000000000000000000000000000000
00000001000000000000009E-0000000000000000000000000000000000000000.gz
00000001000000000000009F-0000000000000000000000000000000000000000
0000000100000000000000A0-0000000000000000000000000000000000000000.gz
0000000100000000000000A1-0000000000000000000000000000000000000000
0000000100000000000000A2-0000000000000000000000000000000000000000.gz
0000000100000000000000A3-0000000000000000000000000000000000000000
0000000100000000000000A4-0000000000000000000000000000000000000000.gz
0000000100000000000000A5-0000000000000000000000000000000000000000
0000000100000000000000A6-0000000000000000000000000000000000000000.gz
0000000100000000000000A7-0000000000000000000000000000000000000000
0000000100000000000000A8-0000000000000000000000000000000000000000.gz
0000000100000000000000A9-0000000000000000000000000000000000000000
0000000100000000000000AA-0000000000000000000000000000000000000000.gz
0000000100000000000000AB-0000000000000000000000000000000000000000
0000000100000000000000AC-0000000000000000000000000000000000000000.gz
0000000100000000000000AD-0000000000000000000000000000000000000000
0000000100000000000000AE-0000000000000000000000000000000000000000.gz
0000000100000000000000AF-0000000000000000000000000000000000000000
0000000100000000000000B0-0000000000000000000000000000000000000000.gz
0000000100000000000000B1-0000000000000000000000000000000000000000
0000000100000000000000B2-0000000000000000000000000000000000000000.gz
0000000100000000000000B3-0000000000000000000000000000000000000000
0000000100000000000000B4-0000000000000000000000000000000000000000.gz
0000000100000000000000B5-0000000000000000000000000000000000000000
0000000100000000000000B6-0000000000000000000000000000000000000000.gz
0000000100000000000000B7-0000000000000000000000000000000000000000
0000000100000000000000B8-0000000000000000000000000000000000000000.gz
0000000100000000000000B9-0000000000000000000000000000000000000000
0000000100000000000000BA-0000000000000000000000000000000000000000.gz
0000000100000000000000BB-0000000000000000000000000000000000000000
0000000100000000000000BC-0000000000000000000000000000000000000000.gz
0000000100000000000000BD-0000000000000000000000000000000000000000
0000000100000000000000BE-0000000000000000000000000000000000000000.gz
0000000100000000000000BF-0000000000000000000000000000000000000000
0000000100000000000000C0-0000000000000000000000000000000000000000.gz
0000000100000000000000C1-0000000000000000000000000000000000000000
0000000100000000000000C2-0000000000000000000000000000000000000000.gz
0000000100000000000000C3-0000000000000000000000000000000000000000
0000000100000000000000C4-0000000000000000000000000000000000000000.gz
0000000100000000000000C5-0000000000000000000000000000000000000000
0000000100000000000000C6-0000000000000000000000000000000000000000.gz
0000000100000000000000C7-0000000000000000000000000000000000000000
0000000100000000000000C8-0000000000000000000000000000000000000000.gz
0000000100000000000000C9-0000000000000000000000000000000000000000
0000000100000000000000CA-0000000000000000000000000000000000000000.gz
0000000100000000000000CB-0000000000000000000000000000000000000000
0000000100000000000000CC-0000000000000000000000000000000000000000.gz
0000000100000000000000CD-0000000000000000000000000000000000000000
0000000100000000000000CE-0000000000000000000000000000000000000000.gz
0000000100000000000000CF-0000000000000000000000000000000000000000
0000000100000000000000D0-0000000000000000000000000000000000000000.gz
0000000100000000000000D1-0000000000000000000000000000000000000000
0000000100000000000000D2-0000000000000000000000000000000000000000.gz
0000000100000000000000D3-0000000000000000000000000000000000000000
0000000100000000000000D4-0000000000000000000000000000000000000000.gz
0000000100000000000000D5-0000000000000000000000000000000000000000
0000000100000000000000D6-0000000000000000000000000000000000000000.gz
0000000100000000000000D7-0000000000000000000000000000000000000000
0000000100000000000000D8-0000000000000000000000000000000000000000.gz
0000000100000000000000D9-0000000000000000000000000000000000000000
0000000100000000000000DA-0000000000000000000000000000000000000000.gz
0000000100000000000000DB-0000000000000000000000000000000000000000
0000000100000000000000DC-0000000000000000000000000000000000000000.gz
0000000100000000000000DD-0000000000000000000000000000000000000000
0000000100000000000000DE-0000000000000000000000000000000000000000.gz
0000000100000000000000DF-0000000000000000000000000000000000000000
0000000100000000000000E0-0000000000000000000000000000000000000000.gz
0000000100000000000000E1-0000000000000000000000000000000000000000
0000000100000000000000E2-0000000000000000000000000000000000000000.gz
0000000100000000000000E3-0000000000000000000000000000000000000000
0000000100000000000000E4-0000000000000000000000000000000000000000.gz
0000000100000000000000E5-0000000000000000000000000000000000000000
0000000100000000000000E6-0000000000000000000000000000000000000000.gz
0000000100000000000000E7-0000000000000000000000000000000000000000
0000000100000000000000E8-0000000000000000000000000000000000000000.gz
0000000100000000000000E9-0000000000000000000000000000000000000000
0000000100000000000000EA-0000000000000000000000000000000000000000.gz
0000000100000000000000EB-0000000000000000000000000000000000000000
0000000100000000000000EC-0000000000000000000000000000000000000000.gz
0000000100000000000000ED-0000000000000000000000000000000000000000
0000000100000000000000EE-0000000000000000000000000000000000000000.gz
0000000100000000000000EF-0000000000000000000000000000000000000000
0000000100000000000000F0-0000000000000000000000000000000000000000.gz
0000000100000000000000F1-0000000000000000000000000000000000000000
0000000100000000000000F2-0000000000000000000000000000000000000000.gz
0000000100000000000000F3-0000000000000000000000000000000000000000
0000000100000000000000F4-0000000000000000000000000000000000000000.gz
0000000100000000000000F5-0000000000000000000000000000000000000000
0000000100000000000000F6-0000000000000000000000000000000000000000.gz
0000000100000000000000F7-0000000000000000000000000000000000000000
0000000100000000000000F8-0000000000000000000000000000000000000000.gz
0000000100000000000000F9-0000000000000000000000000000000000000000
0000000100000000000000FA-0000000000000000000000000000000000000000.gz
0000000100000000000000FB-0000000000000000000000000000000000000000
0000000100000000000000FC-0000000000000000000000000000000000000000.gz
0000000100000000000000FD-0000000000000000000000000000000000000000
0000000100000000000000FE-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000.gz
000000010000000100000001-0000000000000000000000000000000000000000
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000.gz
000000010000000100000004-0000000000000000000000000000000000000000
000000010000000100000005-0000000000000000000000000000000000000000.gz

Expire oldest full backup, archive expire falls on segment major boundary
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=full --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=full --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00   INFO: repo1: expire full backup set [BACKUP-FULL-1], [BACKUP-INCR-1]
P00   INFO: repo1: remove expired backup [BACKUP-INCR-1]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-1]
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-2], start = 000000010000000100000000
P00   INFO: repo1: 9.2-1 remove archive, start = 0000000100000000, stop = 0000000100000000
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000000","backup-archive-stop":"000000010000000100000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-2]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000.gz
000000010000000100000001-0000000000000000000000000000000000000000
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000.gz
000000010000000100000004-0000000000000000000000000000000000000000
000000010000000100000005-0000000000000000000000000000000000000000.gz

* diff backup: label = [BACKUP-DIFF-1], prior = [BACKUP-FULL-2], start = 000000010000000100000006, stop = 000000010000000100000008
* diff backup: label = [BACKUP-DIFF-2], prior = [BACKUP-DIFF-1], start = 00000001000000010000000C, stop = 00000001000000020000000C
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000000","backup-archive-stop":"000000010000000100000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-1]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000006","backup-archive-stop":"000000010000000100000008","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-2]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000010000000C","backup-archive-stop":"00000001000000020000000C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-2]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-2]
[BACKUP-DIFF-1]
[BACKUP-DIFF-2]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000.gz
000000010000000100000001-0000000000000000000000000000000000000000
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000.gz
000000010000000100000004-0000000000000000000000000000000000000000
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000.gz
000000010000000100000007-0000000000000000000000000000000000000000
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000.gz
00000001000000010000000A-0000000000000000000000000000000000000000
00000001000000010000000B-0000000000000000000000000000000000000000.gz
00000001000000010000000C-0000000000000000000000000000000000000000.gz
00000001000000010000000D-0000000000000000000000000000000000000000
00000001000000010000000E-0000000000000000000000000000000000000000.gz
00000001000000010000000F-0000000000000000000000000000000000000000
000000010000000100000010-0000000000000000000000000000000000000000.gz
000000010000000100000011-0000000000000000000000000000000000000000
000000010000000100000012-0000000000000000000000000000000000000000.gz
000000010000000100000013-0000000000000000000000000000000000000000
000000010000000100000014-0000000000000000000000000000000000000000.gz
000000010000000100000015-0000000000000000000000000000000000000000
000000010000000100000016-0000000000000000000000000000000000000000.gz
000000010000000100000017-0000000000000000000000000000000000000000
000000010000000100000018-0000000000000000000000000000000000000000.gz
000000010000000100000019-0000000000000000000000000000000000000000
00000001000000010000001A-0000000000000000000000000000000000000000.gz
00000001000000010000001B-0000000000000000000000000000000000000000
00000001000000010000001C-0000000000000000000000000000000000000000.gz
00000001000000010000001D-0000000000000000000000000000000000000000
00000001000000010000001E-0000000000000000000000000000000000000000.gz
00000001000000010000001F-0000000000000000000000000000000000000000
000000010000000100000020-0000000000000000000000000000000000000000.gz
000000010000000100000021-0000000000000000000000000000000000000000
000000010000000100000022-0000000000000000000000000000000000000000.gz
000000010000000100000023-0000000000000000000000000000000000000000
000000010000000100000024-0000000000000000000000000000000000000000.gz
000000010000000100000025-0000000000000000000000000000000000000000
000000010000000100000026-0000000000000000000000000000000000000000.gz
000000010000000100000027-0000000000000000000000000000000000000000
000000010000000100000028-0000000000000000000000000000000000000000.gz
000000010000000100000029-0000000000000000000000000000000000000000
00000001000000010000002A-0000000000000000000000000000000000000000.gz
00000001000000010000002B-0000000000000000000000000000000000000000
00000001000000010000002C-0000000000000000000000000000000000000000.gz
00000001000000010000002D-0000000000000000000000000000000000000000
00000001000000010000002E-0000000000000000000000000000000000000000.gz
00000001000000010000002F-0000000000000000000000000000000000000000
000000010000000100000030-0000000000000000000000000000000000000000.gz
000000010000000100000031-0000000000000000000000000000000000000000
000000010000000100000032-0000000000000000000000000000000000000000.gz
000000010000000100000033-0000000000000000000000000000000000000000
000000010000000100000034-0000000000000000000000000000000000000000.gz
000000010000000100000035-0000000000000000000000000000000000000000
000000010000000100000036-0000000000000000000000000000000000000000.gz
000000010000000100000037-0000000000000000000000000000000000000000
000000010000000100000038-0000000000000000000000000000000000000000.gz
000000010000000100000039-0000000000000000000000000000000000000000
00000001000000010000003A-0000000000000000000000000000000000000000.gz
00000001000000010000003B-0000000000000000000000000000000000000000
00000001000000010000003C-0000000000000000000000000000000000000000.gz
00000001000000010000003D-0000000000000000000000000000000000000000
00000001000000010000003E-0000000000000000000000000000000000000000.gz
00000001000000010000003F-0000000000000000000000000000000000000000
000000010000000100000040-0000000000000000000000000000000000000000.gz
000000010000000100000041-0000000000000000000000000000000000000000
000000010000000100000042-0000000000000000000000000000000000000000.gz
000000010000000100000043-0000000000000000000000000000000000000000
000000010000000100000044-0000000000000000000000000000000000000000.gz
000000010000000100000045-0000000000000000000000000000000000000000
000000010000000100000046-0000000000000000000000000000000000000000.gz
000000010000000100000047-0000000000000000000000000000000000000000
000000010000000100000048-0000000000000000000000000000000000000000.gz
000000010000000100000049-0000000000000000000000000000000000000000
00000001000000010000004A-0000000000000000000000000000000000000000.gz
00000001000000010000004B-0000000000000000000000000000000000000000
00000001000000010000004C-0000000000000000000000000000000000000000.gz
00000001000000010000004D-0000000000000000000000000000000000000000
00000001000000010000004E-0000000000000000000000000000000000000000.gz
00000001000000010000004F-0000000000000000000000000000000000000000
000000010000000100000050-0000000000000000000000000000000000000000.gz
000000010000000100000051-0000000000000000000000000000000000000000
000000010000000100000052-0000000000000000000000000000000000000000.gz
000000010000000100000053-0000000000000000000000000000000000000000
000000010000000100000054-0000000000000000000000000000000000000000.gz
000000010000000100000055-0000000000000000000000000000000000000000
000000010000000100000056-0000000000000000000000000000000000000000.gz
000000010000000100000057-0000000000000000000000000000000000000000
000000010000000100000058-0000000000000000000000000000000000000000.gz
000000010000000100000059-0000000000000000000000000000000000000000
00000001000000010000005A-0000000000000000000000000000000000000000.gz
00000001000000010000005B-0000000000000000000000000000000000000000
00000001000000010000005C-0000000000000000000000000000000000000000.gz
00000001000000010000005D-0000000000000000000000000000000000000000
00000001000000010000005E-0000000000000000000000000000000000000000.gz
00000001000000010000005F-0000000000000000000000000000000000000000
000000010000000100000060-0000000000000000000000000000000000000000.gz
000000010000000100000061-0000000000000000000000000000000000000000
000000010000000100000062-0000000000000000000000000000000000000000.gz
000000010000000100000063-0000000000000000000000000000000000000000
000000010000000100000064-0000000000000000000000000000000000000000.gz
000000010000000100000065-0000000000000000000000000000000000000000
000000010000000100000066-0000000000000000000000000000000000000000.gz
000000010000000100000067-0000000000000000000000000000000000000000
000000010000000100000068-0000000000000000000000000000000000000000.gz
000000010000000100000069-0000000000000000000000000000000000000000
00000001000000010000006A-0000000000000000000000000000000000000000.gz
00000001000000010000006B-0000000000000000000000000000000000000000
00000001000000010000006C-0000000000000000000000000000000000000000.gz
00000001000000010000006D-0000000000000000000000000000000000000000
00000001000000010000006E-0000000000000000000000000000000000000000.gz
00000001000000010000006F-0000000000000000000000000000000000000000
000000010000000100000070-0000000000000000000000000000000000000000.gz
000000010000000100000071-0000000000000000000000000000000000000000
000000010000000100000072-0000000000000000000000000000000000000000.gz
000000010000000100000073-0000000000000000000000000000000000000000
000000010000000100000074-0000000000000000000000000000000000000000.gz
000000010000000100000075-0000000000000000000000000000000000000000
000000010000000100000076-0000000000000000000000000000000000000000.gz
000000010000000100000077-0000000000000000000000000000000000000000
000000010000000100000078-0000000000000000000000000000000000000000.gz
000000010000000100000079-0000000000000000000000000000000000000000
00000001000000010000007A-0000000000000000000000000000000000000000.gz
00000001000000010000007B-0000000000000000000000000000000000000000
00000001000000010000007C-0000000000000000000000000000000000000000.gz
00000001000000010000007D-0000000000000000000000000000000000000000
00000001000000010000007E-0000000000000000000000000000000000000000.gz
00000001000000010000007F-0000000000000000000000000000000000000000
000000010000000100000080-0000000000000000000000000000000000000000.gz
000000010000000100000081-0000000000000000000000000000000000000000
000000010000000100000082-0000000000000000000000000000000000000000.gz
000000010000000100000083-0000000000000000000000000000000000000000
000000010000000100000084-0000000000000000000000000000000000000000.gz
000000010000000100000085-0000000000000000000000000000000000000000
000000010000000100000086-0000000000000000000000000000000000000000.gz
000000010000000100000087-0000000000000000000000000000000000000000
000000010000000100000088-0000000000000000000000000000000000000000.gz
000000010000000100000089-0000000000000000000000000000000000000000
00000001000000010000008A-0000000000000000000000000000000000000000.gz
00000001000000010000008B-0000000000000000000000000000000000000000
00000001000000010000008C-0000000000000000000000000000000000000000.gz
00000001000000010000008D-0000000000000000000000000000000000000000
00000001000000010000008E-0000000000000000000000000000000000000000.gz
00000001000000010000008F-0000000000000000000000000000000000000000
000000010000000100000090-0000000000000000000000000000000000000000.gz
000000010000000100000091-0000000000000000000000000000000000000000
000000010000000100000092-0000000000000000000000000000000000000000.gz
000000010000000100000093-0000000000000000000000000000000000000000
000000010000000100000094-0000000000000000000000000000000000000000.gz
000000010000000100000095-0000000000000000000000000000000000000000
000000010000000100000096-0000000000000000000000000000000000000000.gz
000000010000000100000097-0000000000000000000000000000000000000000
000000010000000100000098-0000000000000000000000000000000000000000.gz
000000010000000100000099-0000000000000000000000000000000000000000
00000001000000010000009A-0000000000000000000000000000000000000000.gz
00000001000000010000009B-0000000000000000000000000000000000000000
00000001000000010000009C-0000000000000000000000000000000000000000.gz
00000001000000010000009D-0000000000000000000000000000000000000000
00000001000000010000009E-0000000000000000000000000000000000000000.gz
00000001000000010000009F-0000000000000000000000000000000000000000
0000000100000001000000A0-0000000000000000000000000000000000000000.gz
0000000100000001000000A1-0000000000000000000000000000000000000000
0000000100000001000000A2-0000000000000000000000000000000000000000.gz
0000000100000001000000A3-0000000000000000000000000000000000000000
0000000100000001000000A4-0000000000000000000000000000000000000000.gz
0000000100000001000000A5-0000000000000000000000000000000000000000
0000000100000001000000A6-0000000000000000000000000000000000000000.gz
0000000100000001000000A7-0000000000000000000000000000000000000000
0000000100000001000000A8-0000000000000000000000000000000000000000.gz
0000000100000001000000A9-0000000000000000000000000000000000000000
0000000100000001000000AA-0000000000000000000000000000000000000000.gz
0000000100000001000000AB-0000000000000000000000000000000000000000
0000000100000001000000AC-0000000000000000000000000000000000000000.gz
0000000100000001000000AD-0000000000000000000000000000000000000000
0000000100000001000000AE-0000000000000000000000000000000000000000.gz
0000000100000001000000AF-0000000000000000000000000000000000000000
0000000100000001000000B0-0000000000000000000000000000000000000000.gz
0000000100000001000000B1-0000000000000000000000000000000000000000
0000000100000001000000B2-0000000000000000000000000000000000000000.gz
0000000100000001000000B3-0000000000000000000000000000000000000000
0000000100000001000000B4-0000000000000000000000000000000000000000.gz
0000000100000001000000B5-0000000000000000000000000000000000000000
0000000100000001000000B6-0000000000000000000000000000000000000000.gz
0000000100000001000000B7-0000000000000000000000000000000000000000
0000000100000001000000B8-0000000000000000000000000000000000000000.gz
0000000100000001000000B9-0000000000000000000000000000000000000000
0000000100000001000000BA-0000000000000000000000000000000000000000.gz
0000000100000001000000BB-0000000000000000000000000000000000000000
0000000100000001000000BC-0000000000000000000000000000000000000000.gz
0000000100000001000000BD-0000000000000000000000000000000000000000
0000000100000001000000BE-0000000000000000000000000000000000000000.gz
0000000100000001000000BF-0000000000000000000000000000000000000000
0000000100000001000000C0-0000000000000000000000000000000000000000.gz
0000000100000001000000C1-0000000000000000000000000000000000000000
0000000100000001000000C2-0000000000000000000000000000000000000000.gz
0000000100000001000000C3-0000000000000000000000000000000000000000
0000000100000001000000C4-0000000000000000000000000000000000000000.gz
0000000100000001000000C5-0000000000000000000000000000000000000000
0000000100000001000000C6-0000000000000000000000000000000000000000.gz
0000000100000001000000C7-0000000000000000000000000000000000000000
0000000100000001000000C8-0000000000000000000000000000000000000000.gz
0000000100000001000000C9-0000000000000000000000000000000000000000
0000000100000001000000CA-0000000000000000000000000000000000000000.gz
0000000100000001000000CB-0000000000000000000000000000000000000000
0000000100000001000000CC-0000000000000000000000000000000000000000.gz
0000000100000001000000CD-0000000000000000000000000000000000000000
0000000100000001000000CE-0000000000000000000000000000000000000000.gz
0000000100000001000000CF-0000000000000000000000000000000000000000
0000000100000001000000D0-0000000000000000000000000000000000000000.gz
0000000100000001000000D1-0000000000000000000000000000000000000000
0000000100000001000000D2-0000000000000000000000000000000000000000.gz
0000000100000001000000D3-0000000000000000000000000000000000000000
0000000100000001000000D4-0000000000000000000000000000000000000000.gz
0000000100000001000000D5-0000000000000000000000000000000000000000
0000000100000001000000D6-0000000000000000000000000000000000000000.gz
0000000100000001000000D7-0000000000000000000000000000000000000000
0000000100000001000000D8-0000000000000000000000000000000000000000.gz
0000000100000001000000D9-0000000000000000000000000000000000000000
0000000100000001000000DA-0000000000000000000000000000000000000000.gz
0000000100000001000000DB-0000000000000000000000000000000000000000
0000000100000001000000DC-0000000000000000000000000000000000000000.gz
0000000100000001000000DD-0000000000000000000000000000000000000000
0000000100000001000000DE-0000000000000000000000000000000000000000.gz
0000000100000001000000DF-0000000000000000000000000000000000000000
0000000100000001000000E0-0000000000000000000000000000000000000000.gz
0000000100000001000000E1-0000000000000000000000000000000000000000
0000000100000001000000E2-0000000000000000000000000000000000000000.gz
0000000100000001000000E3-0000000000000000000000000000000000000000
0000000100000001000000E4-0000000000000000000000000000000000000000.gz
0000000100000001000000E5-0000000000000000000000000000000000000000
0000000100000001000000E6-0000000000000000000000000000000000000000.gz
0000000100000001000000E7-0000000000000000000000000000000000000000
0000000100000001000000E8-0000000000000000000000000000000000000000.gz
0000000100000001000000E9-0000000000000000000000000000000000000000
0000000100000001000000EA-0000000000000000000000000000000000000000.gz
0000000100000001000000EB-0000000000000000000000000000000000000000
0000000100000001000000EC-0000000000000000000000000000000000000000.gz
0000000100000001000000ED-0000000000000000000000000000000000000000
0000000100000001000000EE-0000000000000000000000000000000000000000.gz
0000000100000001000000EF-0000000000000000000000000000000000000000
0000000100000001000000F0-0000000000000000000000000000000000000000.gz
0000000100000001000000F1-0000000000000000000000000000000000000000
0000000100000001000000F2-0000000000000000000000000000000000000000.gz
0000000100000001000000F3-0000000000000000000000000000000000000000
0000000100000001000000F4-0000000000000000000000000000000000000000.gz
0000000100000001000000F5-0000000000000000000000000000000000000000
0000000100000001000000F6-0000000000000000000000000000000000000000.gz
0000000100000001000000F7-0000000000000000000000000000000000000000
0000000100000001000000F8-0000000000000000000000000000000000000000.gz
0000000100000001000000F9-0000000000000000000000000000000000000000
0000000100000001000000FA-0000000000000000000000000000000000000000.gz
0000000100000001000000FB-0000000000000000000000000000000000000000
0000000100000001000000FC-0000000000000000000000000000000000000000.gz
0000000100000001000000FD-0000000000000000000000000000000000000000
0000000100000001000000FE-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000000-0000000000000000000000000000000000000000
000000010000000200000001-0000000000000000000000000000000000000000.gz
000000010000000200000002-0000000000000000000000000000000000000000
000000010000000200000003-0000000000000000000000000000000000000000.gz
000000010000000200000004-0000000000000000000000000000000000000000
000000010000000200000005-0000000000000000000000000000000000000000.gz
000000010000000200000006-0000000000000000000000000000000000000000
000000010000000200000007-0000000000000000000000000000000000000000.gz
000000010000000200000008-0000000000000000000000000000000000000000
000000010000000200000009-0000000000000000000000000000000000000000.gz
00000001000000020000000A-0000000000000000000000000000000000000000
00000001000000020000000B-0000000000000000000000000000000000000000.gz
00000001000000020000000C-0000000000000000000000000000000000000000
00000001000000020000000D-0000000000000000000000000000000000000000.gz
00000001000000020000000E-0000000000000000000000000000000000000000
00000001000000020000000F-0000000000000000000000000000000000000000.gz

Expire oldest full backup
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=full --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=full --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00   INFO: repo1: expire diff backup [BACKUP-DIFF-1]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-1]
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-2], start = 000000010000000100000000
P00   INFO: repo1: 9.2-1 no archive to remove
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000000","backup-archive-stop":"000000010000000100000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000010000000C","backup-archive-stop":"00000001000000020000000C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-2]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-2]
[BACKUP-DIFF-2]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000.gz
000000010000000100000001-0000000000000000000000000000000000000000
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000.gz
000000010000000100000004-0000000000000000000000000000000000000000
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000.gz
000000010000000100000007-0000000000000000000000000000000000000000
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000.gz
00000001000000010000000A-0000000000000000000000000000000000000000
00000001000000010000000B-0000000000000000000000000000000000000000.gz
00000001000000010000000C-0000000000000000000000000000000000000000.gz
00000001000000010000000D-0000000000000000000000000000000000000000
00000001000000010000000E-0000000000000000000000000000000000000000.gz
00000001000000010000000F-0000000000000000000000000000000000000000
000000010000000100000010-0000000000000000000000000000000000000000.gz
000000010000000100000011-0000000000000000000000000000000000000000
000000010000000100000012-0000000000000000000000000000000000000000.gz
000000010000000100000013-0000000000000000000000000000000000000000
000000010000000100000014-0000000000000000000000000000000000000000.gz
000000010000000100000015-0000000000000000000000000000000000000000
000000010000000100000016-0000000000000000000000000000000000000000.gz
000000010000000100000017-0000000000000000000000000000000000000000
000000010000000100000018-0000000000000000000000000000000000000000.gz
000000010000000100000019-0000000000000000000000000000000000000000
00000001000000010000001A-0000000000000000000000000000000000000000.gz
00000001000000010000001B-0000000000000000000000000000000000000000
00000001000000010000001C-0000000000000000000000000000000000000000.gz
00000001000000010000001D-0000000000000000000000000000000000000000
00000001000000010000001E-0000000000000000000000000000000000000000.gz
00000001000000010000001F-0000000000000000000000000000000000000000
000000010000000100000020-0000000000000000000000000000000000000000.gz
000000010000000100000021-0000000000000000000000000000000000000000
000000010000000100000022-0000000000000000000000000000000000000000.gz
000000010000000100000023-0000000000000000000000000000000000000000
000000010000000100000024-0000000000000000000000000000000000000000.gz
000000010000000100000025-0000000000000000000000000000000000000000
000000010000000100000026-0000000000000000000000000000000000000000.gz
000000010000000100000027-0000000000000000000000000000000000000000
000000010000000100000028-0000000000000000000000000000000000000000.gz
000000010000000100000029-0000000000000000000000000000000000000000
00000001000000010000002A-0000000000000000000000000000000000000000.gz
00000001000000010000002B-0000000000000000000000000000000000000000
00000001000000010000002C-0000000000000000000000000000000000000000.gz
00000001000000010000002D-0000000000000000000000000000000000000000
00000001000000010000002E-0000000000000000000000000000000000000000.gz
00000001000000010000002F-0000000000000000000000000000000000000000
000000010000000100000030-0000000000000000000000000000000000000000.gz
000000010000000100000031-0000000000000000000000000000000000000000
000000010000000100000032-0000000000000000000000000000000000000000.gz
000000010000000100000033-0000000000000000000000000000000000000000
000000010000000100000034-0000000000000000000000000000000000000000.gz
000000010000000100000035-0000000000000000000000000000000000000000
000000010000000100000036-0000000000000000000000000000000000000000.gz
000000010000000100000037-0000000000000000000000000000000000000000
000000010000000100000038-0000000000000000000000000000000000000000.gz
000000010000000100000039-0000000000000000000000000000000000000000
00000001000000010000003A-0000000000000000000000000000000000000000.gz
00000001000000010000003B-0000000000000000000000000000000000000000
00000001000000010000003C-0000000000000000000000000000000000000000.gz
00000001000000010000003D-0000000000000000000000000000000000000000
00000001000000010000003E-0000000000000000000000000000000000000000.gz
00000001000000010000003F-0000000000000000000000000000000000000000
000000010000000100000040-0000000000000000000000000000000000000000.gz
000000010000000100000041-0000000000000000000000000000000000000000
000000010000000100000042-0000000000000000000000000000000000000000.gz
000000010000000100000043-0000000000000000000000000000000000000000
000000010000000100000044-0000000000000000000000000000000000000000.gz
000000010000000100000045-0000000000000000000000000000000000000000
000000010000000100000046-0000000000000000000000000000000000000000.gz
000000010000000100000047-0000000000000000000000000000000000000000
000000010000000100000048-0000000000000000000000000000000000000000.gz
000000010000000100000049-0000000000000000000000000000000000000000
00000001000000010000004A-0000000000000000000000000000000000000000.gz
00000001000000010000004B-0000000000000000000000000000000000000000
00000001000000010000004C-0000000000000000000000000000000000000000.gz
00000001000000010000004D-0000000000000000000000000000000000000000
00000001000000010000004E-0000000000000000000000000000000000000000.gz
00000001000000010000004F-0000000000000000000000000000000000000000
000000010000000100000050-0000000000000000000000000000000000000000.gz
000000010000000100000051-0000000000000000000000000000000000000000
000000010000000100000052-0000000000000000000000000000000000000000.gz
000000010000000100000053-0000000000000000000000000000000000000000
000000010000000100000054-0000000000000000000000000000000000000000.gz
000000010000000100000055-0000000000000000000000000000000000000000
000000010000000100000056-0000000000000000000000000000000000000000.gz
000000010000000100000057-0000000000000000000000000000000000000000
000000010000000100000058-0000000000000000000000000000000000000000.gz
000000010000000100000059-0000000000000000000000000000000000000000
00000001000000010000005A-0000000000000000000000000000000000000000.gz
00000001000000010000005B-0000000000000000000000000000000000000000
00000001000000010000005C-0000000000000000000000000000000000000000.gz
00000001000000010000005D-0000000000000000000000000000000000000000
00000001000000010000005E-0000000000000000000000000000000000000000.gz
00000001000000010000005F-0000000000000000000000000000000000000000
000000010000000100000060-0000000000000000000000000000000000000000.gz
000000010000000100000061-0000000000000000000000000000000000000000
000000010000000100000062-0000000000000000000000000000000000000000.gz
000000010000000100000063-0000000000000000000000000000000000000000
000000010000000100000064-0000000000000000000000000000000000000000.gz
000000010000000100000065-0000000000000000000000000000000000000000
000000010000000100000066-0000000000000000000000000000000000000000.gz
000000010000000100000067-0000000000000000000000000000000000000000
000000010000000100000068-0000000000000000000000000000000000000000.gz
000000010000000100000069-0000000000000000000000000000000000000000
00000001000000010000006A-0000000000000000000000000000000000000000.gz
00000001000000010000006B-0000000000000000000000000000000000000000
00000001000000010000006C-0000000000000000000000000000000000000000.gz
00000001000000010000006D-0000000000000000000000000000000000000000
00000001000000010000006E-0000000000000000000000000000000000000000.gz
00000001000000010000006F-0000000000000000000000000000000000000000
000000010000000100000070-0000000000000000000000000000000000000000.gz
000000010000000100000071-0000000000000000000000000000000000000000
000000010000000100000072-0000000000000000000000000000000000000000.gz
000000010000000100000073-0000000000000000000000000000000000000000
000000010000000100000074-0000000000000000000000000000000000000000.gz
000000010000000100000075-0000000000000000000000000000000000000000
000000010000000100000076-0000000000000000000000000000000000000000.gz
000000010000000100000077-0000000000000000000000000000000000000000
000000010000000100000078-0000000000000000000000000000000000000000.gz
000000010000000100000079-0000000000000000000000000000000000000000
00000001000000010000007A-0000000000000000000000000000000000000000.gz
00000001000000010000007B-0000000000000000000000000000000000000000
00000001000000010000007C-0000000000000000000000000000000000000000.gz
00000001000000010000007D-0000000000000000000000000000000000000000
00000001000000010000007E-0000000000000000000000000000000000000000.gz
00000001000000010000007F-0000000000000000000000000000000000000000
000000010000000100000080-0000000000000000000000000000000000000000.gz
000000010000000100000081-0000000000000000000000000000000000000000
000000010000000100000082-0000000000000000000000000000000000000000.gz
000000010000000100000083-0000000000000000000000000000000000000000
000000010000000100000084-0000000000000000000000000000000000000000.gz
000000010000000100000085-0000000000000000000000000000000000000000
000000010000000100000086-0000000000000000000000000000000000000000.gz
000000010000000100000087-0000000000000000000000000000000000000000
000000010000000100000088-0000000000000000000000000000000000000000.gz
000000010000000100000089-0000000000000000000000000000000000000000
00000001000000010000008A-0000000000000000000000000000000000000000.gz
00000001000000010000008B-0000000000000000000000000000000000000000
00000001000000010000008C-0000000000000000000000000000000000000000.gz
00000001000000010000008D-0000000000000000000000000000000000000000
00000001000000010000008E-0000000000000000000000000000000000000000.gz
00000001000000010000008F-0000000000000000000000000000000000000000
000000010000000100000090-0000000000000000000000000000000000000000.gz
000000010000000100000091-0000000000000000000000000000000000000000
000000010000000100000092-0000000000000000000000000000000000000000.gz
000000010000000100000093-0000000000000000000000000000000000000000
000000010000000100000094-0000000000000000000000000000000000000000.gz
000000010000000100000095-0000000000000000000000000000000000000000
000000010000000100000096-0000000000000000000000000000000000000000.gz
000000010000000100000097-0000000000000000000000000000000000000000
000000010000000100000098-0000000000000000000000000000000000000000.gz
000000010000000100000099-0000000000000000000000000000000000000000
00000001000000010000009A-0000000000000000000000000000000000000000.gz
00000001000000010000009B-0000000000000000000000000000000000000000
00000001000000010000009C-0000000000000000000000000000000000000000.gz
00000001000000010000009D-0000000000000000000000000000000000000000
00000001000000010000009E-0000000000000000000000000000000000000000.gz
00000001000000010000009F-0000000000000000000000000000000000000000
0000000100000001000000A0-0000000000000000000000000000000000000000.gz
0000000100000001000000A1-0000000000000000000000000000000000000000
0000000100000001000000A2-0000000000000000000000000000000000000000.gz
0000000100000001000000A3-0000000000000000000000000000000000000000
0000000100000001000000A4-0000000000000000000000000000000000000000.gz
0000000100000001000000A5-0000000000000000000000000000000000000000
0000000100000001000000A6-0000000000000000000000000000000000000000.gz
0000000100000001000000A7-0000000000000000000000000000000000000000
0000000100000001000000A8-0000000000000000000000000000000000000000.gz
0000000100000001000000A9-0000000000000000000000000000000000000000
0000000100000001000000AA-0000000000000000000000000000000000000000.gz
0000000100000001000000AB-0000000000000000000000000000000000000000
0000000100000001000000AC-0000000000000000000000000000000000000000.gz
0000000100000001000000AD-0000000000000000000000000000000000000000
0000000100000001000000AE-0000000000000000000000000000000000000000.gz
0000000100000001000000AF-0000000000000000000000000000000000000000
0000000100000001000000B0-0000000000000000000000000000000000000000.gz
0000000100000001000000B1-0000000000000000000000000000000000000000
0000000100000001000000B2-0000000000000000000000000000000000000000.gz
0000000100000001000000B3-0000000000000000000000000000000000000000
0000000100000001000000B4-0000000000000000000000000000000000000000.gz
0000000100000001000000B5-0000000000000000000000000000000000000000
0000000100000001000000B6-0000000000000000000000000000000000000000.gz
0000000100000001000000B7-0000000000000000000000000000000000000000
0000000100000001000000B8-0000000000000000000000000000000000000000.gz
0000000100000001000000B9-0000000000000000000000000000000000000000
0000000100000001000000BA-0000000000000000000000000000000000000000.gz
0000000100000001000000BB-0000000000000000000000000000000000000000
0000000100000001000000BC-0000000000000000000000000000000000000000.gz
0000000100000001000000BD-0000000000000000000000000000000000000000
0000000100000001000000BE-0000000000000000000000000000000000000000.gz
0000000100000001000000BF-0000000000000000000000000000000000000000
0000000100000001000000C0-0000000000000000000000000000000000000000.gz
0000000100000001000000C1-0000000000000000000000000000000000000000
0000000100000001000000C2-0000000000000000000000000000000000000000.gz
0000000100000001000000C3-0000000000000000000000000000000000000000
0000000100000001000000C4-0000000000000000000000000000000000000000.gz
0000000100000001000000C5-0000000000000000000000000000000000000000
0000000100000001000000C6-0000000000000000000000000000000000000000.gz
0000000100000001000000C7-0000000000000000000000000000000000000000
0000000100000001000000C8-0000000000000000000000000000000000000000.gz
0000000100000001000000C9-0000000000000000000000000000000000000000
0000000100000001000000CA-0000000000000000000000000000000000000000.gz
0000000100000001000000CB-0000000000000000000000000000000000000000
0000000100000001000000CC-0000000000000000000000000000000000000000.gz
0000000100000001000000CD-0000000000000000000000000000000000000000
0000000100000001000000CE-0000000000000000000000000000000000000000.gz
0000000100000001000000CF-0000000000000000000000000000000000000000
0000000100000001000000D0-0000000000000000000000000000000000000000.gz
0000000100000001000000D1-0000000000000000000000000000000000000000
0000000100000001000000D2-0000000000000000000000000000000000000000.gz
0000000100000001000000D3-0000000000000000000000000000000000000000
0000000100000001000000D4-0000000000000000000000000000000000000000.gz
0000000100000001000000D5-0000000000000000000000000000000000000000
0000000100000001000000D6-0000000000000000000000000000000000000000.gz
0000000100000001000000D7-0000000000000000000000000000000000000000
0000000100000001000000D8-0000000000000000000000000000000000000000.gz
0000000100000001000000D9-0000000000000000000000000000000000000000
0000000100000001000000DA-0000000000000000000000000000000000000000.gz
0000000100000001000000DB-0000000000000000000000000000000000000000
0000000100000001000000DC-0000000000000000000000000000000000000000.gz
0000000100000001000000DD-0000000000000000000000000000000000000000
0000000100000001000000DE-0000000000000000000000000000000000000000.gz
0000000100000001000000DF-0000000000000000000000000000000000000000
0000000100000001000000E0-0000000000000000000000000000000000000000.gz
0000000100000001000000E1-0000000000000000000000000000000000000000
0000000100000001000000E2-0000000000000000000000000000000000000000.gz
0000000100000001000000E3-0000000000000000000000000000000000000000
0000000100000001000000E4-0000000000000000000000000000000000000000.gz
0000000100000001000000E5-0000000000000000000000000000000000000000
0000000100000001000000E6-0000000000000000000000000000000000000000.gz
0000000100000001000000E7-0000000000000000000000000000000000000000
0000000100000001000000E8-0000000000000000000000000000000000000000.gz
0000000100000001000000E9-0000000000000000000000000000000000000000
0000000100000001000000EA-0000000000000000000000000000000000000000.gz
0000000100000001000000EB-0000000000000000000000000000000000000000
0000000100000001000000EC-0000000000000000000000000000000000000000.gz
0000000100000001000000ED-0000000000000000000000000000000000000000
0000000100000001000000EE-0000000000000000000000000000000000000000.gz
0000000100000001000000EF-0000000000000000000000000000000000000000
0000000100000001000000F0-0000000000000000000000000000000000000000.gz
0000000100000001000000F1-0000000000000000000000000000000000000000
0000000100000001000000F2-0000000000000000000000000000000000000000.gz
0000000100000001000000F3-0000000000000000000000000000000000000000
0000000100000001000000F4-0000000000000000000000000000000000000000.gz
0000000100000001000000F5-0000000000000000000000000000000000000000
0000000100000001000000F6-0000000000000000000000000000000000000000.gz
0000000100000001000000F7-0000000000000000000000000000000000000000
0000000100000001000000F8-0000000000000000000000000000000000000000.gz
0000000100000001000000F9-0000000000000000000000000000000000000000
0000000100000001000000FA-0000000000000000000000000000000000000000.gz
0000000100000001000000FB-0000000000000000000000000000000000000000
0000000100000001000000FC-0000000000000000000000000000000000000000.gz
0000000100000001000000FD-0000000000000000000000000000000000000000
0000000100000001000000FE-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000000-0000000000000000000000000000000000000000
000000010000000200000001-0000000000000000000000000000000000000000.gz
000000010000000200000002-0000000000000000000000000000000000000000
000000010000000200000003-0000000000000000000000000000000000000000.gz
000000010000000200000004-0000000000000000000000000000000000000000
000000010000000200000005-0000000000000000000000000000000000000000.gz
000000010000000200000006-0000000000000000000000000000000000000000
000000010000000200000007-0000000000000000000000000000000000000000.gz
000000010000000200000008-0000000000000000000000000000000000000000
000000010000000200000009-0000000000000000000000000000000000000000.gz
00000001000000020000000A-0000000000000000000000000000000000000000
00000001000000020000000B-0000000000000000000000000000000000000000.gz
00000001000000020000000C-0000000000000000000000000000000000000000
00000001000000020000000D-0000000000000000000000000000000000000000.gz
00000001000000020000000E-0000000000000000000000000000000000000000
00000001000000020000000F-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-3], start = 000000010000000200000010, stop = 000000010000000200000012
* diff backup: label = [BACKUP-DIFF-3], prior = [BACKUP-FULL-3], start = 000000010000000200000016, stop = 000000010000000200000018
* incr backup: label = [BACKUP-INCR-2], prior = [BACKUP-DIFF-3], start = 00000001000000020000001A, stop = 00000001000000020000001C
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000100000000","backup-archive-stop":"000000010000000100000002","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000010000000C","backup-archive-stop":"00000001000000020000000C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-2]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000016","backup-archive-stop":"000000010000000200000018","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001A","backup-archive-stop":"00000001000000020000001C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-DIFF-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-2]
[BACKUP-DIFF-2]
[BACKUP-FULL-3]
[BACKUP-DIFF-3]
[BACKUP-INCR-2]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000001:
000000010000000100000000-0000000000000000000000000000000000000000.gz
000000010000000100000001-0000000000000000000000000000000000000000
000000010000000100000002-0000000000000000000000000000000000000000.gz
000000010000000100000003-0000000000000000000000000000000000000000.gz
000000010000000100000004-0000000000000000000000000000000000000000
000000010000000100000005-0000000000000000000000000000000000000000.gz
000000010000000100000006-0000000000000000000000000000000000000000.gz
000000010000000100000007-0000000000000000000000000000000000000000
000000010000000100000008-0000000000000000000000000000000000000000.gz
000000010000000100000009-0000000000000000000000000000000000000000.gz
00000001000000010000000A-0000000000000000000000000000000000000000
00000001000000010000000B-0000000000000000000000000000000000000000.gz
00000001000000010000000C-0000000000000000000000000000000000000000.gz
00000001000000010000000D-0000000000000000000000000000000000000000
00000001000000010000000E-0000000000000000000000000000000000000000.gz
00000001000000010000000F-0000000000000000000000000000000000000000
000000010000000100000010-0000000000000000000000000000000000000000.gz
000000010000000100000011-0000000000000000000000000000000000000000
000000010000000100000012-0000000000000000000000000000000000000000.gz
000000010000000100000013-0000000000000000000000000000000000000000
000000010000000100000014-0000000000000000000000000000000000000000.gz
000000010000000100000015-0000000000000000000000000000000000000000
000000010000000100000016-0000000000000000000000000000000000000000.gz
000000010000000100000017-0000000000000000000000000000000000000000
000000010000000100000018-0000000000000000000000000000000000000000.gz
000000010000000100000019-0000000000000000000000000000000000000000
00000001000000010000001A-0000000000000000000000000000000000000000.gz
00000001000000010000001B-0000000000000000000000000000000000000000
00000001000000010000001C-0000000000000000000000000000000000000000.gz
00000001000000010000001D-0000000000000000000000000000000000000000
00000001000000010000001E-0000000000000000000000000000000000000000.gz
00000001000000010000001F-0000000000000000000000000000000000000000
000000010000000100000020-0000000000000000000000000000000000000000.gz
000000010000000100000021-0000000000000000000000000000000000000000
000000010000000100000022-0000000000000000000000000000000000000000.gz
000000010000000100000023-0000000000000000000000000000000000000000
000000010000000100000024-0000000000000000000000000000000000000000.gz
000000010000000100000025-0000000000000000000000000000000000000000
000000010000000100000026-0000000000000000000000000000000000000000.gz
000000010000000100000027-0000000000000000000000000000000000000000
000000010000000100000028-0000000000000000000000000000000000000000.gz
000000010000000100000029-0000000000000000000000000000000000000000
00000001000000010000002A-0000000000000000000000000000000000000000.gz
00000001000000010000002B-0000000000000000000000000000000000000000
00000001000000010000002C-0000000000000000000000000000000000000000.gz
00000001000000010000002D-0000000000000000000000000000000000000000
00000001000000010000002E-0000000000000000000000000000000000000000.gz
00000001000000010000002F-0000000000000000000000000000000000000000
000000010000000100000030-0000000000000000000000000000000000000000.gz
000000010000000100000031-0000000000000000000000000000000000000000
000000010000000100000032-0000000000000000000000000000000000000000.gz
000000010000000100000033-0000000000000000000000000000000000000000
000000010000000100000034-0000000000000000000000000000000000000000.gz
000000010000000100000035-0000000000000000000000000000000000000000
000000010000000100000036-0000000000000000000000000000000000000000.gz
000000010000000100000037-0000000000000000000000000000000000000000
000000010000000100000038-0000000000000000000000000000000000000000.gz
000000010000000100000039-0000000000000000000000000000000000000000
00000001000000010000003A-0000000000000000000000000000000000000000.gz
00000001000000010000003B-0000000000000000000000000000000000000000
00000001000000010000003C-0000000000000000000000000000000000000000.gz
00000001000000010000003D-0000000000000000000000000000000000000000
00000001000000010000003E-0000000000000000000000000000000000000000.gz
00000001000000010000003F-0000000000000000000000000000000000000000
000000010000000100000040-0000000000000000000000000000000000000000.gz
000000010000000100000041-0000000000000000000000000000000000000000
000000010000000100000042-0000000000000000000000000000000000000000.gz
000000010000000100000043-0000000000000000000000000000000000000000
000000010000000100000044-0000000000000000000000000000000000000000.gz
000000010000000100000045-0000000000000000000000000000000000000000
000000010000000100000046-0000000000000000000000000000000000000000.gz
000000010000000100000047-0000000000000000000000000000000000000000
000000010000000100000048-0000000000000000000000000000000000000000.gz
000000010000000100000049-0000000000000000000000000000000000000000
00000001000000010000004A-0000000000000000000000000000000000000000.gz
00000001000000010000004B-0000000000000000000000000000000000000000
00000001000000010000004C-0000000000000000000000000000000000000000.gz
00000001000000010000004D-0000000000000000000000000000000000000000
00000001000000010000004E-0000000000000000000000000000000000000000.gz
00000001000000010000004F-0000000000000000000000000000000000000000
000000010000000100000050-0000000000000000000000000000000000000000.gz
000000010000000100000051-0000000000000000000000000000000000000000
000000010000000100000052-0000000000000000000000000000000000000000.gz
000000010000000100000053-0000000000000000000000000000000000000000
000000010000000100000054-0000000000000000000000000000000000000000.gz
000000010000000100000055-0000000000000000000000000000000000000000
000000010000000100000056-0000000000000000000000000000000000000000.gz
000000010000000100000057-0000000000000000000000000000000000000000
000000010000000100000058-0000000000000000000000000000000000000000.gz
000000010000000100000059-0000000000000000000000000000000000000000
00000001000000010000005A-0000000000000000000000000000000000000000.gz
00000001000000010000005B-0000000000000000000000000000000000000000
00000001000000010000005C-0000000000000000000000000000000000000000.gz
00000001000000010000005D-0000000000000000000000000000000000000000
00000001000000010000005E-0000000000000000000000000000000000000000.gz
00000001000000010000005F-0000000000000000000000000000000000000000
000000010000000100000060-0000000000000000000000000000000000000000.gz
000000010000000100000061-0000000000000000000000000000000000000000
000000010000000100000062-0000000000000000000000000000000000000000.gz
000000010000000100000063-0000000000000000000000000000000000000000
000000010000000100000064-0000000000000000000000000000000000000000.gz
000000010000000100000065-0000000000000000000000000000000000000000
000000010000000100000066-0000000000000000000000000000000000000000.gz
000000010000000100000067-0000000000000000000000000000000000000000
000000010000000100000068-0000000000000000000000000000000000000000.gz
000000010000000100000069-0000000000000000000000000000000000000000
00000001000000010000006A-0000000000000000000000000000000000000000.gz
00000001000000010000006B-0000000000000000000000000000000000000000
00000001000000010000006C-0000000000000000000000000000000000000000.gz
00000001000000010000006D-0000000000000000000000000000000000000000
00000001000000010000006E-0000000000000000000000000000000000000000.gz
00000001000000010000006F-0000000000000000000000000000000000000000
000000010000000100000070-0000000000000000000000000000000000000000.gz
000000010000000100000071-0000000000000000000000000000000000000000
000000010000000100000072-0000000000000000000000000000000000000000.gz
000000010000000100000073-0000000000000000000000000000000000000000
000000010000000100000074-0000000000000000000000000000000000000000.gz
000000010000000100000075-0000000000000000000000000000000000000000
000000010000000100000076-0000000000000000000000000000000000000000.gz
000000010000000100000077-0000000000000000000000000000000000000000
000000010000000100000078-0000000000000000000000000000000000000000.gz
000000010000000100000079-0000000000000000000000000000000000000000
00000001000000010000007A-0000000000000000000000000000000000000000.gz
00000001000000010000007B-0000000000000000000000000000000000000000
00000001000000010000007C-0000000000000000000000000000000000000000.gz
00000001000000010000007D-0000000000000000000000000000000000000000
00000001000000010000007E-0000000000000000000000000000000000000000.gz
00000001000000010000007F-0000000000000000000000000000000000000000
000000010000000100000080-0000000000000000000000000000000000000000.gz
000000010000000100000081-0000000000000000000000000000000000000000
000000010000000100000082-0000000000000000000000000000000000000000.gz
000000010000000100000083-0000000000000000000000000000000000000000
000000010000000100000084-0000000000000000000000000000000000000000.gz
000000010000000100000085-0000000000000000000000000000000000000000
000000010000000100000086-0000000000000000000000000000000000000000.gz
000000010000000100000087-0000000000000000000000000000000000000000
000000010000000100000088-0000000000000000000000000000000000000000.gz
000000010000000100000089-0000000000000000000000000000000000000000
00000001000000010000008A-0000000000000000000000000000000000000000.gz
00000001000000010000008B-0000000000000000000000000000000000000000
00000001000000010000008C-0000000000000000000000000000000000000000.gz
00000001000000010000008D-0000000000000000000000000000000000000000
00000001000000010000008E-0000000000000000000000000000000000000000.gz
00000001000000010000008F-0000000000000000000000000000000000000000
000000010000000100000090-0000000000000000000000000000000000000000.gz
000000010000000100000091-0000000000000000000000000000000000000000
000000010000000100000092-0000000000000000000000000000000000000000.gz
000000010000000100000093-0000000000000000000000000000000000000000
000000010000000100000094-0000000000000000000000000000000000000000.gz
000000010000000100000095-0000000000000000000000000000000000000000
000000010000000100000096-0000000000000000000000000000000000000000.gz
000000010000000100000097-0000000000000000000000000000000000000000
000000010000000100000098-0000000000000000000000000000000000000000.gz
000000010000000100000099-0000000000000000000000000000000000000000
00000001000000010000009A-0000000000000000000000000000000000000000.gz
00000001000000010000009B-0000000000000000000000000000000000000000
00000001000000010000009C-0000000000000000000000000000000000000000.gz
00000001000000010000009D-0000000000000000000000000000000000000000
00000001000000010000009E-0000000000000000000000000000000000000000.gz
00000001000000010000009F-0000000000000000000000000000000000000000
0000000100000001000000A0-0000000000000000000000000000000000000000.gz
0000000100000001000000A1-0000000000000000000000000000000000000000
0000000100000001000000A2-0000000000000000000000000000000000000000.gz
0000000100000001000000A3-0000000000000000000000000000000000000000
0000000100000001000000A4-0000000000000000000000000000000000000000.gz
0000000100000001000000A5-0000000000000000000000000000000000000000
0000000100000001000000A6-0000000000000000000000000000000000000000.gz
0000000100000001000000A7-0000000000000000000000000000000000000000
0000000100000001000000A8-0000000000000000000000000000000000000000.gz
0000000100000001000000A9-0000000000000000000000000000000000000000
0000000100000001000000AA-0000000000000000000000000000000000000000.gz
0000000100000001000000AB-0000000000000000000000000000000000000000
0000000100000001000000AC-0000000000000000000000000000000000000000.gz
0000000100000001000000AD-0000000000000000000000000000000000000000
0000000100000001000000AE-0000000000000000000000000000000000000000.gz
0000000100000001000000AF-0000000000000000000000000000000000000000
0000000100000001000000B0-0000000000000000000000000000000000000000.gz
0000000100000001000000B1-0000000000000000000000000000000000000000
0000000100000001000000B2-0000000000000000000000000000000000000000.gz
0000000100000001000000B3-0000000000000000000000000000000000000000
0000000100000001000000B4-0000000000000000000000000000000000000000.gz
0000000100000001000000B5-0000000000000000000000000000000000000000
0000000100000001000000B6-0000000000000000000000000000000000000000.gz
0000000100000001000000B7-0000000000000000000000000000000000000000
0000000100000001000000B8-0000000000000000000000000000000000000000.gz
0000000100000001000000B9-0000000000000000000000000000000000000000
0000000100000001000000BA-0000000000000000000000000000000000000000.gz
0000000100000001000000BB-0000000000000000000000000000000000000000
0000000100000001000000BC-0000000000000000000000000000000000000000.gz
0000000100000001000000BD-0000000000000000000000000000000000000000
0000000100000001000000BE-0000000000000000000000000000000000000000.gz
0000000100000001000000BF-0000000000000000000000000000000000000000
0000000100000001000000C0-0000000000000000000000000000000000000000.gz
0000000100000001000000C1-0000000000000000000000000000000000000000
0000000100000001000000C2-0000000000000000000000000000000000000000.gz
0000000100000001000000C3-0000000000000000000000000000000000000000
0000000100000001000000C4-0000000000000000000000000000000000000000.gz
0000000100000001000000C5-0000000000000000000000000000000000000000
0000000100000001000000C6-0000000000000000000000000000000000000000.gz
0000000100000001000000C7-0000000000000000000000000000000000000000
0000000100000001000000C8-0000000000000000000000000000000000000000.gz
0000000100000001000000C9-0000000000000000000000000000000000000000
0000000100000001000000CA-0000000000000000000000000000000000000000.gz
0000000100000001000000CB-0000000000000000000000000000000000000000
0000000100000001000000CC-0000000000000000000000000000000000000000.gz
0000000100000001000000CD-0000000000000000000000000000000000000000
0000000100000001000000CE-0000000000000000000000000000000000000000.gz
0000000100000001000000CF-0000000000000000000000000000000000000000
0000000100000001000000D0-0000000000000000000000000000000000000000.gz
0000000100000001000000D1-0000000000000000000000000000000000000000
0000000100000001000000D2-0000000000000000000000000000000000000000.gz
0000000100000001000000D3-0000000000000000000000000000000000000000
0000000100000001000000D4-0000000000000000000000000000000000000000.gz
0000000100000001000000D5-0000000000000000000000000000000000000000
0000000100000001000000D6-0000000000000000000000000000000000000000.gz
0000000100000001000000D7-0000000000000000000000000000000000000000
0000000100000001000000D8-0000000000000000000000000000000000000000.gz
0000000100000001000000D9-0000000000000000000000000000000000000000
0000000100000001000000DA-0000000000000000000000000000000000000000.gz
0000000100000001000000DB-0000000000000000000000000000000000000000
0000000100000001000000DC-0000000000000000000000000000000000000000.gz
0000000100000001000000DD-0000000000000000000000000000000000000000
0000000100000001000000DE-0000000000000000000000000000000000000000.gz
0000000100000001000000DF-0000000000000000000000000000000000000000
0000000100000001000000E0-0000000000000000000000000000000000000000.gz
0000000100000001000000E1-0000000000000000000000000000000000000000
0000000100000001000000E2-0000000000000000000000000000000000000000.gz
0000000100000001000000E3-0000000000000000000000000000000000000000
0000000100000001000000E4-0000000000000000000000000000000000000000.gz
0000000100000001000000E5-0000000000000000000000000000000000000000
0000000100000001000000E6-0000000000000000000000000000000000000000.gz
0000000100000001000000E7-0000000000000000000000000000000000000000
0000000100000001000000E8-0000000000000000000000000000000000000000.gz
0000000100000001000000E9-0000000000000000000000000000000000000000
0000000100000001000000EA-0000000000000000000000000000000000000000.gz
0000000100000001000000EB-0000000000000000000000000000000000000000
0000000100000001000000EC-0000000000000000000000000000000000000000.gz
0000000100000001000000ED-0000000000000000000000000000000000000000
0000000100000001000000EE-0000000000000000000000000000000000000000.gz
0000000100000001000000EF-0000000000000000000000000000000000000000
0000000100000001000000F0-0000000000000000000000000000000000000000.gz
0000000100000001000000F1-0000000000000000000000000000000000000000
0000000100000001000000F2-0000000000000000000000000000000000000000.gz
0000000100000001000000F3-0000000000000000000000000000000000000000
0000000100000001000000F4-0000000000000000000000000000000000000000.gz
0000000100000001000000F5-0000000000000000000000000000000000000000
0000000100000001000000F6-0000000000000000000000000000000000000000.gz
0000000100000001000000F7-0000000000000000000000000000000000000000
0000000100000001000000F8-0000000000000000000000000000000000000000.gz
0000000100000001000000F9-0000000000000000000000000000000000000000
0000000100000001000000FA-0000000000000000000000000000000000000000.gz
0000000100000001000000FB-0000000000000000000000000000000000000000
0000000100000001000000FC-0000000000000000000000000000000000000000.gz
0000000100000001000000FD-0000000000000000000000000000000000000000
0000000100000001000000FE-0000000000000000000000000000000000000000.gz

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000000-0000000000000000000000000000000000000000
000000010000000200000001-0000000000000000000000000000000000000000.gz
000000010000000200000002-0000000000000000000000000000000000000000
000000010000000200000003-0000000000000000000000000000000000000000.gz
000000010000000200000004-0000000000000000000000000000000000000000
000000010000000200000005-0000000000000000000000000000000000000000.gz
000000010000000200000006-0000000000000000000000000000000000000000
000000010000000200000007-0000000000000000000000000000000000000000.gz
000000010000000200000008-0000000000000000000000000000000000000000
000000010000000200000009-0000000000000000000000000000000000000000.gz
00000001000000020000000A-0000000000000000000000000000000000000000
00000001000000020000000B-0000000000000000000000000000000000000000.gz
00000001000000020000000C-0000000000000000000000000000000000000000
00000001000000020000000D-0000000000000000000000000000000000000000.gz
00000001000000020000000E-0000000000000000000000000000000000000000
00000001000000020000000F-0000000000000000000000000000000000000000.gz
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
000000010000000200000013-0000000000000000000000000000000000000000.gz
000000010000000200000014-0000000000000000000000000000000000000000
000000010000000200000015-0000000000000000000000000000000000000000.gz
000000010000000200000016-0000000000000000000000000000000000000000.gz
000000010000000200000017-0000000000000000000000000000000000000000
000000010000000200000018-0000000000000000000000000000000000000000.gz
000000010000000200000019-0000000000000000000000000000000000000000.gz
00000001000000020000001A-0000000000000000000000000000000000000000.gz
00000001000000020000001B-0000000000000000000000000000000000000000
00000001000000020000001C-0000000000000000000000000000000000000000.gz
00000001000000020000001D-0000000000000000000000000000000000000000.gz

Expire oldest diff backup, archive expire does not fall on major segment boundary
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=diff --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=diff --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00   INFO: repo1: expire full backup set [BACKUP-FULL-2], [BACKUP-DIFF-2]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-2]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-2]
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-3], start = 000000010000000200000010, stop = 000000010000000200000012
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-3], start = 000000010000000200000016
P00   INFO: repo1: 9.2-1 remove archive, start = 0000000100000001, stop = 00000001000000020000000F
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000013, stop = 000000010000000200000015
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000016","backup-archive-stop":"000000010000000200000018","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001A","backup-archive-stop":"00000001000000020000001C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-DIFF-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-3]
[BACKUP-DIFF-3]
[BACKUP-INCR-2]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
000000010000000200000016-0000000000000000000000000000000000000000.gz
000000010000000200000017-0000000000000000000000000000000000000000
000000010000000200000018-0000000000000000000000000000000000000000.gz
000000010000000200000019-0000000000000000000000000000000000000000.gz
00000001000000020000001A-0000000000000000000000000000000000000000.gz
00000001000000020000001B-0000000000000000000000000000000000000000
00000001000000020000001C-0000000000000000000000000000000000000000.gz
00000001000000020000001D-0000000000000000000000000000000000000000.gz

* diff backup: label = [BACKUP-DIFF-4], prior = [BACKUP-INCR-2], start = 00000001000000020000001E, stop = 000000010000000200000020
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000016","backup-archive-stop":"000000010000000200000018","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-2]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001A","backup-archive-stop":"00000001000000020000001C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-DIFF-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001E","backup-archive-stop":"000000010000000200000020","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-3]
[BACKUP-DIFF-3]
[BACKUP-INCR-2]
[BACKUP-DIFF-4]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
000000010000000200000016-0000000000000000000000000000000000000000.gz
000000010000000200000017-0000000000000000000000000000000000000000
000000010000000200000018-0000000000000000000000000000000000000000.gz
000000010000000200000019-0000000000000000000000000000000000000000.gz
00000001000000020000001A-0000000000000000000000000000000000000000.gz
00000001000000020000001B-0000000000000000000000000000000000000000
00000001000000020000001C-0000000000000000000000000000000000000000.gz
00000001000000020000001D-0000000000000000000000000000000000000000.gz
00000001000000020000001E-0000000000000000000000000000000000000000.gz
00000001000000020000001F-0000000000000000000000000000000000000000
000000010000000200000020-0000000000000000000000000000000000000000.gz
000000010000000200000021-0000000000000000000000000000000000000000.gz
000000010000000200000022-0000000000000000000000000000000000000000
000000010000000200000023-0000000000000000000000000000000000000000.gz

Expire oldest diff backup (cascade to incr)
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=diff --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=diff --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00   INFO: repo1: expire diff backup set [BACKUP-DIFF-3], [BACKUP-INCR-2]
P00   INFO: repo1: remove expired backup [BACKUP-INCR-2]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-3]
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-3], start = 000000010000000200000010, stop = 000000010000000200000012
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-4], start = 00000001000000020000001E
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000016, stop = 00000001000000020000001D
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001E","backup-archive-stop":"000000010000000200000020","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-3]
[BACKUP-DIFF-4]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
00000001000000020000001E-0000000000000000000000000000000000000000.gz
00000001000000020000001F-0000000000000000000000000000000000000000
000000010000000200000020-0000000000000000000000000000000000000000.gz
000000010000000200000021-0000000000000000000000000000000000000000.gz
000000010000000200000022-0000000000000000000000000000000000000000
000000010000000200000023-0000000000000000000000000000000000000000.gz

* incr backup: label = [BACKUP-INCR-3], prior = [BACKUP-DIFF-4], start = 000000010000000200000024, stop = 000000010000000200000026
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001E","backup-archive-stop":"000000010000000200000020","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000024","backup-archive-stop":"000000010000000200000026","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-DIFF-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-3]
[BACKUP-DIFF-4]
[BACKUP-INCR-3]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
00000001000000020000001E-0000000000000000000000000000000000000000.gz
00000001000000020000001F-0000000000000000000000000000000000000000
000000010000000200000020-0000000000000000000000000000000000000000.gz
000000010000000200000021-0000000000000000000000000000000000000000.gz
000000010000000200000022-0000000000000000000000000000000000000000
000000010000000200000023-0000000000000000000000000000000000000000.gz
000000010000000200000024-0000000000000000000000000000000000000000.gz
000000010000000200000025-0000000000000000000000000000000000000000
000000010000000200000026-0000000000000000000000000000000000000000.gz
000000010000000200000027-0000000000000000000000000000000000000000.gz
000000010000000200000028-0000000000000000000000000000000000000000
000000010000000200000029-0000000000000000000000000000000000000000.gz

Expire archive based on newest incr backup
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=incr --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=incr --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-3], start = 000000010000000200000010, stop = 000000010000000200000012
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-4], start = 00000001000000020000001E, stop = 000000010000000200000020
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-INCR-3], start = 000000010000000200000024
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000021, stop = 000000010000000200000023
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001E","backup-archive-stop":"000000010000000200000020","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000024","backup-archive-stop":"000000010000000200000026","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-DIFF-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-3]
[BACKUP-DIFF-4]
[BACKUP-INCR-3]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
00000001000000020000001E-0000000000000000000000000000000000000000.gz
00000001000000020000001F-0000000000000000000000000000000000000000
000000010000000200000020-0000000000000000000000000000000000000000.gz
000000010000000200000024-0000000000000000000000000000000000000000.gz
000000010000000200000025-0000000000000000000000000000000000000000
000000010000000200000026-0000000000000000000000000000000000000000.gz
000000010000000200000027-0000000000000000000000000000000000000000.gz
000000010000000200000028-0000000000000000000000000000000000000000
000000010000000200000029-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-4], start = 00000001000000020000002A, stop = 00000001000000020000002C
* diff backup: label = [BACKUP-DIFF-5], prior = [BACKUP-FULL-4], start = 000000010000000200000030, stop = 000000010000000200000032
* full backup: label = [BACKUP-FULL-5], start = 000000010000000200000036, stop = 000000010000000200000038
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000010","backup-archive-stop":"000000010000000200000012","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000001E","backup-archive-stop":"000000010000000200000020","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-3]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-3]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000024","backup-archive-stop":"000000010000000200000026","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-DIFF-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000030","backup-archive-stop":"000000010000000200000032","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-4]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-3]
[BACKUP-DIFF-4]
[BACKUP-INCR-3]
[BACKUP-FULL-4]
[BACKUP-DIFF-5]
[BACKUP-FULL-5]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
000000010000000200000010-0000000000000000000000000000000000000000.gz
000000010000000200000011-0000000000000000000000000000000000000000
000000010000000200000012-0000000000000000000000000000000000000000.gz
00000001000000020000001E-0000000000000000000000000000000000000000.gz
00000001000000020000001F-0000000000000000000000000000000000000000
000000010000000200000020-0000000000000000000000000000000000000000.gz
000000010000000200000024-0000000000000000000000000000000000000000.gz
000000010000000200000025-0000000000000000000000000000000000000000
000000010000000200000026-0000000000000000000000000000000000000000.gz
000000010000000200000027-0000000000000000000000000000000000000000.gz
000000010000000200000028-0000000000000000000000000000000000000000
000000010000000200000029-0000000000000000000000000000000000000000.gz
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
00000001000000020000002D-0000000000000000000000000000000000000000.gz
00000001000000020000002E-0000000000000000000000000000000000000000
00000001000000020000002F-0000000000000000000000000000000000000000.gz
000000010000000200000030-0000000000000000000000000000000000000000.gz
000000010000000200000031-0000000000000000000000000000000000000000
000000010000000200000032-0000000000000000000000000000000000000000.gz
000000010000000200000033-0000000000000000000000000000000000000000.gz
000000010000000200000034-0000000000000000000000000000000000000000
000000010000000200000035-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
000000010000000200000039-0000000000000000000000000000000000000000.gz
00000001000000020000003A-0000000000000000000000000000000000000000
00000001000000020000003B-0000000000000000000000000000000000000000.gz

Expire diff treating full as diff
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=2 --repo1-retention-diff=1 --repo1-retention-archive-type=diff --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=diff --repo1-retention-diff=1 --repo1-retention-full=2 --stanza=db
P00   INFO: repo1: expire full backup set [BACKUP-FULL-3], [BACKUP-DIFF-4], [BACKUP-INCR-3]
P00   INFO: repo1: expire diff backup [BACKUP-DIFF-5]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-5]
P00   INFO: repo1: remove expired backup [BACKUP-INCR-3]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-4]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-3]
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-4], start = 00000001000000020000002A, stop = 00000001000000020000002C
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-5], start = 000000010000000200000036
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000010, stop = 000000010000000200000029
P00   INFO: repo1: 9.2-1 remove archive, start = 00000001000000020000002D, stop = 000000010000000200000035
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
000000010000000200000039-0000000000000000000000000000000000000000.gz
00000001000000020000003A-0000000000000000000000000000000000000000
00000001000000020000003B-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-6], start = 00000001000000020000003C, stop = 00000001000000020000003E
* diff backup: label = [BACKUP-DIFF-6], prior = [BACKUP-FULL-6], start = 000000010000000200000042, stop = 000000010000000200000044
* diff backup: label = [BACKUP-DIFF-7], prior = [BACKUP-DIFF-6], start = 000000010000000200000048, stop = 00000001000000020000004A
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000003C","backup-archive-stop":"00000001000000020000003E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000042","backup-archive-stop":"000000010000000200000044","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000048","backup-archive-stop":"00000001000000020000004A","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]
[BACKUP-DIFF-6]
[BACKUP-DIFF-7]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
000000010000000200000039-0000000000000000000000000000000000000000.gz
00000001000000020000003A-0000000000000000000000000000000000000000
00000001000000020000003B-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
00000001000000020000003F-0000000000000000000000000000000000000000.gz
000000010000000200000040-0000000000000000000000000000000000000000
000000010000000200000041-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000045-0000000000000000000000000000000000000000.gz
000000010000000200000046-0000000000000000000000000000000000000000
000000010000000200000047-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004B-0000000000000000000000000000000000000000.gz
00000001000000020000004C-0000000000000000000000000000000000000000
00000001000000020000004D-0000000000000000000000000000000000000000.gz

Expire diff with repo-retention-archive with warning repo-retention-diff not set
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-archive-type=diff --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=diff --stanza=db
P00   WARN: option 'repo1-retention-full' is not set for 'repo1-retention-full-type=count', the repository may run out of space
            HINT: to retain full backups indefinitely (without warning), set option 'repo1-retention-full' to the maximum.
P00   WARN: option 'repo1-retention-diff' is not set for 'repo1-retention-archive-type=diff'
            HINT: to retain differential backups indefinitely (without warning), set option 'repo1-retention-diff' to the maximum.
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-4], start = 00000001000000020000002A, stop = 00000001000000020000002C
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-5], start = 000000010000000200000036, stop = 000000010000000200000038
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-6], start = 00000001000000020000003C, stop = 00000001000000020000003E
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-6], start = 000000010000000200000042, stop = 000000010000000200000044
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-7], start = 000000010000000200000048
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000039, stop = 00000001000000020000003B
P00   INFO: repo1: 9.2-1 remove archive, start = 00000001000000020000003F, stop = 000000010000000200000041
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000045, stop = 000000010000000200000047
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000003C","backup-archive-stop":"00000001000000020000003E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000042","backup-archive-stop":"000000010000000200000044","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000048","backup-archive-stop":"00000001000000020000004A","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]
[BACKUP-DIFF-6]
[BACKUP-DIFF-7]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004B-0000000000000000000000000000000000000000.gz
00000001000000020000004C-0000000000000000000000000000000000000000
00000001000000020000004D-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-7], start = 00000001000000020000004E, stop = 000000010000000200000050
* full backup: label = [BACKUP-FULL-8], start = 000000010000000200000054, stop = 000000010000000200000056
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000003C","backup-archive-stop":"00000001000000020000003E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000042","backup-archive-stop":"000000010000000200000044","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000048","backup-archive-stop":"00000001000000020000004A","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000004E","backup-archive-stop":"000000010000000200000050","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000054","backup-archive-stop":"000000010000000200000056","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]
[BACKUP-DIFF-6]
[BACKUP-DIFF-7]
[BACKUP-FULL-7]
[BACKUP-FULL-8]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004B-0000000000000000000000000000000000000000.gz
00000001000000020000004C-0000000000000000000000000000000000000000
00000001000000020000004D-0000000000000000000000000000000000000000.gz
00000001000000020000004E-0000000000000000000000000000000000000000.gz
00000001000000020000004F-0000000000000000000000000000000000000000
000000010000000200000050-0000000000000000000000000000000000000000.gz
000000010000000200000051-0000000000000000000000000000000000000000.gz
000000010000000200000052-0000000000000000000000000000000000000000
000000010000000200000053-0000000000000000000000000000000000000000.gz
000000010000000200000054-0000000000000000000000000000000000000000.gz
000000010000000200000055-0000000000000000000000000000000000000000
000000010000000200000056-0000000000000000000000000000000000000000.gz
000000010000000200000057-0000000000000000000000000000000000000000.gz
000000010000000200000058-0000000000000000000000000000000000000000
000000010000000200000059-0000000000000000000000000000000000000000.gz

Expire full with repo-retention-archive with warning repo-retention-full not set
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-archive-type=full --repo1-retention-archive=1 expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive=1 --repo1-retention-archive-type=full --stanza=db
P00   WARN: option 'repo1-retention-full' is not set for 'repo1-retention-full-type=count', the repository may run out of space
            HINT: to retain full backups indefinitely (without warning), set option 'repo1-retention-full' to the maximum.
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-4], start = 00000001000000020000002A, stop = 00000001000000020000002C
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-5], start = 000000010000000200000036, stop = 000000010000000200000038
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-6], start = 00000001000000020000003C, stop = 00000001000000020000003E
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-6], start = 000000010000000200000042, stop = 000000010000000200000044
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-DIFF-7], start = 000000010000000200000048, stop = 00000001000000020000004A
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-7], start = 00000001000000020000004E, stop = 000000010000000200000050
P00 DETAIL: repo1: 9.2-1 archive retention on backup [BACKUP-FULL-8], start = 000000010000000200000054
P00   INFO: repo1: 9.2-1 remove archive, start = 00000001000000020000004B, stop = 00000001000000020000004D
P00   INFO: repo1: 9.2-1 remove archive, start = 000000010000000200000051, stop = 000000010000000200000053
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000003C","backup-archive-stop":"00000001000000020000003E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000042","backup-archive-stop":"000000010000000200000044","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000048","backup-archive-stop":"00000001000000020000004A","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000004E","backup-archive-stop":"000000010000000200000050","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000054","backup-archive-stop":"000000010000000200000056","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]
[BACKUP-DIFF-6]
[BACKUP-DIFF-7]
[BACKUP-FULL-7]
[BACKUP-FULL-8]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004E-0000000000000000000000000000000000000000.gz
00000001000000020000004F-0000000000000000000000000000000000000000
000000010000000200000050-0000000000000000000000000000000000000000.gz
000000010000000200000054-0000000000000000000000000000000000000000.gz
000000010000000200000055-0000000000000000000000000000000000000000
000000010000000200000056-0000000000000000000000000000000000000000.gz
000000010000000200000057-0000000000000000000000000000000000000000.gz
000000010000000200000058-0000000000000000000000000000000000000000
000000010000000200000059-0000000000000000000000000000000000000000.gz

* incr backup: label = [BACKUP-INCR-4], prior = [BACKUP-FULL-8], start = 00000001000000020000005A, stop = 00000001000000020000005C
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000002A","backup-archive-stop":"00000001000000020000002C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-5]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000036","backup-archive-stop":"000000010000000200000038","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000003C","backup-archive-stop":"00000001000000020000003E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-6]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000042","backup-archive-stop":"000000010000000200000044","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000048","backup-archive-stop":"00000001000000020000004A","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-6]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-7]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000004E","backup-archive-stop":"000000010000000200000050","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000054","backup-archive-stop":"000000010000000200000056","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000005A","backup-archive-stop":"00000001000000020000005C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-8]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-4]
[BACKUP-FULL-5]
[BACKUP-FULL-6]
[BACKUP-DIFF-6]
[BACKUP-DIFF-7]
[BACKUP-FULL-7]
[BACKUP-FULL-8]
[BACKUP-INCR-4]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004E-0000000000000000000000000000000000000000.gz
00000001000000020000004F-0000000000000000000000000000000000000000
000000010000000200000050-0000000000000000000000000000000000000000.gz
000000010000000200000054-0000000000000000000000000000000000000000.gz
000000010000000200000055-0000000000000000000000000000000000000000
000000010000000200000056-0000000000000000000000000000000000000000.gz
000000010000000200000057-0000000000000000000000000000000000000000.gz
000000010000000200000058-0000000000000000000000000000000000000000
000000010000000200000059-0000000000000000000000000000000000000000.gz
00000001000000020000005A-0000000000000000000000000000000000000000.gz
00000001000000020000005B-0000000000000000000000000000000000000000
00000001000000020000005C-0000000000000000000000000000000000000000.gz
00000001000000020000005D-0000000000000000000000000000000000000000.gz
00000001000000020000005E-0000000000000000000000000000000000000000
00000001000000020000005F-0000000000000000000000000000000000000000.gz

Expire no archive with warning since repo-retention-archive not set for INCR
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-full=1 --repo1-retention-diff=1 --repo1-retention-archive-type=incr expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive-type=incr --repo1-retention-diff=1 --repo1-retention-full=1 --stanza=db
P00   WARN: WAL segments will not be expired: option 'repo1-retention-archive-type=incr' but option 'repo1-retention-archive' is not set
P00   INFO: repo1: expire full backup [BACKUP-FULL-4]
P00   INFO: repo1: expire full backup [BACKUP-FULL-5]
P00   INFO: repo1: expire full backup set [BACKUP-FULL-6], [BACKUP-DIFF-6], [BACKUP-DIFF-7]
P00   INFO: repo1: expire full backup [BACKUP-FULL-7]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-7]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-7]
P00   INFO: repo1: remove expired backup [BACKUP-DIFF-6]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-6]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-5]
P00   INFO: repo1: remove expired backup [BACKUP-FULL-4]
P00   INFO: option 'repo1-retention-archive' is not set - archive logs will not be expired
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000054","backup-archive-stop":"000000010000000200000056","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000005A","backup-archive-stop":"00000001000000020000005C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-8]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-8]
[BACKUP-INCR-4]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004E-0000000000000000000000000000000000000000.gz
00000001000000020000004F-0000000000000000000000000000000000000000
000000010000000200000050-0000000000000000000000000000000000000000.gz
000000010000000200000054-0000000000000000000000000000000000000000.gz
000000010000000200000055-0000000000000000000000000000000000000000
000000010000000200000056-0000000000000000000000000000000000000000.gz
000000010000000200000057-0000000000000000000000000000000000000000.gz
000000010000000200000058-0000000000000000000000000000000000000000
000000010000000200000059-0000000000000000000000000000000000000000.gz
00000001000000020000005A-0000000000000000000000000000000000000000.gz
00000001000000020000005B-0000000000000000000000000000000000000000
00000001000000020000005C-0000000000000000000000000000000000000000.gz
00000001000000020000005D-0000000000000000000000000000000000000000.gz
00000001000000020000005E-0000000000000000000000000000000000000000
00000001000000020000005F-0000000000000000000000000000000000000000.gz

* full backup: label = [BACKUP-FULL-9], start = 000000010000000200000060, stop = 000000010000000200000062
* diff backup: label = [BACKUP-DIFF-8], prior = [BACKUP-FULL-9], start = 000000010000000200000066, stop = 000000010000000200000068
* diff backup: label = [BACKUP-DIFF-9], prior = [BACKUP-DIFF-8], start = 00000001000000020000006C, stop = 00000001000000020000006E
====================================================================================================================================

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000054","backup-archive-stop":"000000010000000200000056","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000005A","backup-archive-stop":"00000001000000020000005C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-8]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-9]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000060","backup-archive-stop":"000000010000000200000062","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000066","backup-archive-stop":"000000010000000200000068","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-9]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-9]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000006C","backup-archive-stop":"00000001000000020000006E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-9]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-8]
[BACKUP-INCR-4]
[BACKUP-FULL-9]
[BACKUP-DIFF-8]
[BACKUP-DIFF-9]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004E-0000000000000000000000000000000000000000.gz
00000001000000020000004F-0000000000000000000000000000000000000000
000000010000000200000050-0000000000000000000000000000000000000000.gz
000000010000000200000054-0000000000000000000000000000000000000000.gz
000000010000000200000055-0000000000000000000000000000000000000000
000000010000000200000056-0000000000000000000000000000000000000000.gz
000000010000000200000057-0000000000000000000000000000000000000000.gz
000000010000000200000058-0000000000000000000000000000000000000000
000000010000000200000059-0000000000000000000000000000000000000000.gz
00000001000000020000005A-0000000000000000000000000000000000000000.gz
00000001000000020000005B-0000000000000000000000000000000000000000
00000001000000020000005C-0000000000000000000000000000000000000000.gz
00000001000000020000005D-0000000000000000000000000000000000000000.gz
00000001000000020000005E-0000000000000000000000000000000000000000
00000001000000020000005F-0000000000000000000000000000000000000000.gz
000000010000000200000060-0000000000000000000000000000000000000000.gz
000000010000000200000061-0000000000000000000000000000000000000000
000000010000000200000062-0000000000000000000000000000000000000000.gz
000000010000000200000063-0000000000000000000000000000000000000000.gz
000000010000000200000064-0000000000000000000000000000000000000000
000000010000000200000065-0000000000000000000000000000000000000000.gz
000000010000000200000066-0000000000000000000000000000000000000000.gz
000000010000000200000067-0000000000000000000000000000000000000000
000000010000000200000068-0000000000000000000000000000000000000000.gz
000000010000000200000069-0000000000000000000000000000000000000000.gz
00000001000000020000006A-0000000000000000000000000000000000000000
00000001000000020000006B-0000000000000000000000000000000000000000.gz
00000001000000020000006C-0000000000000000000000000000000000000000.gz
00000001000000020000006D-0000000000000000000000000000000000000000
00000001000000020000006E-0000000000000000000000000000000000000000.gz
00000001000000020000006F-0000000000000000000000000000000000000000.gz
000000010000000200000070-0000000000000000000000000000000000000000
000000010000000200000071-0000000000000000000000000000000000000000.gz

Expire no archive with warning since neither repo-retention-archive nor repo-retention-diff is set
> [CONTAINER-EXEC] db-primary [BACKREST-BIN] --config="[TEST_PATH]/db-primary/pgbackrest.conf" --stanza=db --log-level-console=detail --repo1-retention-archive-type=diff expire
------------------------------------------------------------------------------------------------------------------------------------
P00   INFO: expire command begin [BACKREST-VERSION]: --buffer-size=[BUFFER-SIZE] --config=[TEST_PATH]/db-primary/pgbackrest.conf --exec-id=[EXEC-ID] --lock-path=[TEST_PATH]/db-primary/lock --log-level-console=detail --log-level-file=[LOG-LEVEL-FILE] --log-level-stderr=off --log-path=[TEST_PATH]/db-primary/log --no-log-timestamp --repo1-path=[TEST_PATH]/db-primary/repo --repo1-retention-archive-type=diff --stanza=db
P00   WARN: option 'repo1-retention-full' is not set for 'repo1-retention-full-type=count', the repository may run out of space
            HINT: to retain full backups indefinitely (without warning), set option 'repo1-retention-full' to the maximum.
P00   WARN: WAL segments will not be expired: option 'repo1-retention-archive-type=diff' but neither option 'repo1-retention-archive' nor option 'repo1-retention-diff' is set
P00   INFO: option 'repo1-retention-archive' is not set - archive logs will not be expired
P00   INFO: expire command end: completed successfully

+ supplemental file: [TEST_PATH]/db-primary/repo/backup/db/backup.info
----------------------------------------------------------------------
[backrest]
backrest-format=5
backrest-version="[VERSION-1]"

[backup:current]
[BACKUP-FULL-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000054","backup-archive-stop":"000000010000000200000056","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-INCR-4]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000005A","backup-archive-stop":"00000001000000020000005C","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-8]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"incr","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-FULL-9]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000060","backup-archive-stop":"000000010000000200000062","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"full","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-8]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"000000010000000200000066","backup-archive-stop":"000000010000000200000068","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-9]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}
[BACKUP-DIFF-9]={"backrest-format":5,"backrest-version":"[VERSION-1]","backup-archive-start":"00000001000000020000006C","backup-archive-stop":"00000001000000020000006E","backup-info-repo-size":[SIZE],"backup-info-repo-size-delta":[DELTA],"backup-info-size":[SIZE],"backup-info-size-delta":[DELTA],"backup-prior":"[BACKUP-FULL-9]","backup-reference":[],"backup-timestamp-start":[TIMESTAMP],"backup-timestamp-stop":[TIMESTAMP],"backup-type":"diff","db-id":1,"option-archive-check":true,"option-archive-copy":false,"option-backup-standby":false,"option-checksum-page":true,"option-compress":true,"option-hardlink":false,"option-online":true}

[db]
db-catalog-version=201204301
db-control-version=922
db-id=1
db-system-id=1000000000000000092
db-version="9.2"

[db:history]
1={"db-catalog-version":201204301,"db-control-version":922,"db-system-id":1000000000000000092,"db-version":"9.2"}

[backrest]
backrest-checksum="[CHECKSUM]"

> ls [TEST_PATH]/db-primary/repo/backup/db | grep -v "backup.*"
------------------------------------------------------------------------------------------------------------------------------------
[BACKUP-FULL-8]
[BACKUP-INCR-4]
[BACKUP-FULL-9]
[BACKUP-DIFF-8]
[BACKUP-DIFF-9]

> ls -R [TEST_PATH]/db-primary/repo/archive/db | grep -v "archive.info"
------------------------------------------------------------------------------------------------------------------------------------
[TEST_PATH]/db-primary/repo/archive/db:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1:

[TEST_PATH]/db-primary/repo/archive/db/9.2-1/0000000100000002:
00000001000000020000002A-0000000000000000000000000000000000000000.gz
00000001000000020000002B-0000000000000000000000000000000000000000
00000001000000020000002C-0000000000000000000000000000000000000000.gz
000000010000000200000036-0000000000000000000000000000000000000000.gz
000000010000000200000037-0000000000000000000000000000000000000000
000000010000000200000038-0000000000000000000000000000000000000000.gz
00000001000000020000003C-0000000000000000000000000000000000000000.gz
00000001000000020000003D-0000000000000000000000000000000000000000
00000001000000020000003E-0000000000000000000000000000000000000000.gz
000000010000000200000042-0000000000000000000000000000000000000000.gz
000000010000000200000043-0000000000000000000000000000000000000000
000000010000000200000044-0000000000000000000000000000000000000000.gz
000000010000000200000048-0000000000000000000000000000000000000000.gz
000000010000000200000049-0000000000000000000000000000000000000000
00000001000000020000004A-0000000000000000000000000000000000000000.gz
00000001000000020000004E-0000000000000000000000000000000000000000.gz
00000001000000020000004F-0000000000000000000000000000000000000000
000000010000000200000050-0000000000000000000000000000000000000000.gz
000000010000000200000054-0000000000000000000000000000000000000000.gz
000000010000000200000055-0000000000000000000000000000000000000000
000000010000000200000056-0000000000000000000000000000000000000000.gz
000000010000000200000057-0000000000000000000000000000000000000000.gz
000000010000000200000058-0000000000000000000000000000000000000000
000000010000000200000059-0000000000000000000000000000000000000000.gz
00000001000000020000005A-0000000000000000000000000000000000000000.gz
00000001000000020000005B-0000000000000000000000000000000000000000
00000001000000020000005C-0000000000000000000000000000000000000000.gz
00000001000000020000005D-0000000000000000000000000000000000000000.gz
00000001000000020000005E-0000000000000000000000000000000000000000
00000001000000020000005F-0000000000000000000000000000000000000000.gz
000000010000000200000060-0000000000000000000000000000000000000000.gz
000000010000000200000061-0000000000000000000000000000000000000000
000000010000000200000062-0000000000000000000000000000000000000000.gz
000000010000000200000063-0000000000000000000000000000000000000000.gz
000000010000000200000064-0000000000000000000000000000000000000000
000000010000000200000065-0000000000000000000000000000000000000000.gz
000000010000000200000066-0000000000000000000000000000000000000000.gz
000000010000000200000067-0000000000000000000000000000000000000000
000000010000000200000068-0000000000000000000000000000000000000000.gz
000000010000000200000069-0000000000000000000000000000000000000000.gz
00000001000000020000006A-0000000000000000000000000000000000000000
00000001000000020000006B-0000000000000000000000000000000000000000.gz
00000001000000020000006C-0000000000000000000000000000000000000000.gz
00000001000000020000006D-0000000000000000000000000000000000000000
00000001000000020000006E-0000000000000000000000000000000000000000.gz
00000001000000020000006F-0000000000000000000000000000000000000000.gz
000000010000000200000070-0000000000000000000000000000000000000000
000000010000000200000071-0000000000000000000000000000000000000000.gz
